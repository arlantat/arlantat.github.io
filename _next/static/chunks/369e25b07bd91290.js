(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98879,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return a}});let o=e.r(71645),r="undefined"==typeof window,i=r?()=>{}:o.useLayoutEffect,l=r?()=>{}:o.useEffect;function a(e){let{headManager:t,reduceComponentsToState:n}=e;function a(){if(t&&t.mountedInstances){let r=o.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(n(r,e))}}if(r){var u;null==t||null==(u=t.mountedInstances)||u.add(e.children),a()}return i(()=>{var n;return null==t||null==(n=t.mountedInstances)||n.add(e.children),()=>{var n;null==t||null==(n=t.mountedInstances)||n.delete(e.children)}}),i(()=>(t&&(t._pendingUpdate=a),()=>{t&&(t._pendingUpdate=a)})),l(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},58908,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AmpStateContext",{enumerable:!0,get:function(){return o}});let o=e.r(55682)._(e.r(71645)).default.createContext({})},15986,(e,t,n)=>{"use strict";function o(e){let{ampFirst:t=!1,hybrid:n=!1,hasQuery:o=!1}=void 0===e?{}:e;return t||n&&o}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"isInAmpMode",{enumerable:!0,get:function(){return o}})},25633,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(n,{default:function(){return g},defaultHead:function(){return d}});let o=e.r(55682),r=e.r(90809),i=e.r(43476),l=r._(e.r(71645)),a=o._(e.r(98879)),u=e.r(58908),s=e.r(42732),c=e.r(15986);function d(e){void 0===e&&(e=!1);let t=[(0,i.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function f(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let h=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:n}=t;return e.reduce(f,[]).reverse().concat(d(n).reverse()).filter(function(){let e=new Set,t=new Set,n=new Set,o={};return r=>{let i=!0,l=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){l=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?i=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?i=!1:t.add(r.type);break;case"meta":for(let e=0,t=h.length;e<t;e++){let t=h[e];if(r.props.hasOwnProperty(t))if("charSet"===t)n.has(t)?i=!1:n.add(t);else{let e=r.props[t],n=o[t]||new Set;("name"!==t||!l)&&n.has(e)?i=!1:(n.add(e),o[t]=n)}}}return i}}()).reverse().map((e,t)=>{let n=e.key||t;return l.default.cloneElement(e,{key:n})})}let g=function(e){let{children:t}=e,n=(0,l.useContext)(u.AmpStateContext),o=(0,l.useContext)(s.HeadManagerContext);return(0,i.jsx)(a.default,{reduceComponentsToState:p,headManager:o,inAmpMode:(0,c.isInAmpMode)(n),children:t})};("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},88143,(e,t,n)=>{"use strict";function o(e){let{widthInt:t,heightInt:n,blurWidth:o,blurHeight:r,blurDataURL:i,objectFit:l}=e,a=o?40*o:t,u=r?40*r:n,s=a&&u?"viewBox='0 0 "+a+" "+u+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+s+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(s?"none":"contain"===l?"xMidYMid":"cover"===l?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+i+"'/%3E%3C/svg%3E"}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getImageBlurSvg",{enumerable:!0,get:function(){return o}})},87690,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(n,{VALID_LOADERS:function(){return o},imageConfigDefault:function(){return r}});let o=["default","imgix","cloudinary","akamai","custom"],r={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}},8927,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getImgProps",{enumerable:!0,get:function(){return u}}),e.r(33525);let o=e.r(88143),r=e.r(87690),i=["-moz-initial","fill","none","scale-down",void 0];function l(e){return void 0!==e.default}function a(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u(e,t){var n,u;let s,c,d,{src:f,sizes:h,unoptimized:p=!1,priority:g=!1,loading:m,className:v,quality:y,width:x,height:w,fill:b=!1,style:_,overrideSrc:S,onLoad:E,onLoadingComplete:M,placeholder:C="empty",blurDataURL:k,fetchPriority:N,decoding:P="async",layout:A,objectFit:j,objectPosition:z,lazyBoundary:O,lazyRoot:I,...R}=e,{imgConf:D,showAltText:L,blurComplete:B,defaultLoader:T}=t,H=D||r.imageConfigDefault;if("allSizes"in H)s=H;else{let e=[...H.deviceSizes,...H.imageSizes].sort((e,t)=>e-t),t=H.deviceSizes.sort((e,t)=>e-t),o=null==(n=H.qualities)?void 0:n.sort((e,t)=>e-t);s={...H,allSizes:e,deviceSizes:t,qualities:o}}if(void 0===T)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let V=R.loader||T;delete R.loader,delete R.srcSet;let F="__next_img_default"in V;if(F){if("custom"===s.loader)throw Object.defineProperty(Error('Image with src "'+f+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader'),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=V;V=t=>{let{config:n,...o}=t;return e(o)}}if(A){"fill"===A&&(b=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[A];e&&(_={..._,...e});let t={responsive:"100vw",fill:"100vw"}[A];t&&!h&&(h=t)}let X="",Y=a(x),Z=a(w);if((u=f)&&"object"==typeof u&&(l(u)||void 0!==u.src)){let e=l(f)?f.default:f;if(!e.src)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!e.height||!e.width)throw Object.defineProperty(Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(c=e.blurWidth,d=e.blurHeight,k=k||e.blurDataURL,X=e.src,!b)if(Y||Z){if(Y&&!Z){let t=Y/e.width;Z=Math.round(e.height*t)}else if(!Y&&Z){let t=Z/e.height;Y=Math.round(e.width*t)}}else Y=e.width,Z=e.height}let q=!g&&("lazy"===m||void 0===m);(!(f="string"==typeof f?f:X)||f.startsWith("data:")||f.startsWith("blob:"))&&(p=!0,q=!1),s.unoptimized&&(p=!0),F&&!s.dangerouslyAllowSVG&&f.split("?",1)[0].endsWith(".svg")&&(p=!0);let W=a(y),K=Object.assign(b?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:j,objectPosition:z}:{},L?{}:{color:"transparent"},_),U=B||"empty"===C?null:"blur"===C?'url("data:image/svg+xml;charset=utf-8,'+(0,o.getImageBlurSvg)({widthInt:Y,heightInt:Z,blurWidth:c,blurHeight:d,blurDataURL:k||"",objectFit:K.objectFit})+'")':'url("'+C+'")',G=i.includes(K.objectFit)?"fill"===K.objectFit?"100% 100%":"cover":K.objectFit,Q=U?{backgroundSize:G,backgroundPosition:K.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:U}:{},$=function(e){let{config:t,src:n,unoptimized:o,width:r,quality:i,sizes:l,loader:a}=e;if(o)return{src:n,srcSet:void 0,sizes:void 0};let{widths:u,kind:s}=function(e,t,n){let{deviceSizes:o,allSizes:r}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let o;o=e.exec(n);)t.push(parseInt(o[2]));if(t.length){let e=.01*Math.min(...t);return{widths:r.filter(t=>t>=o[0]*e),kind:"w"}}return{widths:r,kind:"w"}}return"number"!=typeof t?{widths:o,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>r.find(t=>t>=e)||r[r.length-1]))],kind:"x"}}(t,r,l),c=u.length-1;return{sizes:l||"w"!==s?l:"100vw",srcSet:u.map((e,o)=>a({config:t,src:n,quality:i,width:e})+" "+("w"===s?e:o+1)+s).join(", "),src:a({config:t,src:n,quality:i,width:u[c]})}}({config:s,src:f,unoptimized:p,width:Y,quality:W,sizes:h,loader:V});return{props:{...R,loading:q?"lazy":m,fetchPriority:N,width:Y,height:Z,decoding:P,className:v,style:{...K,...Q},sizes:$.sizes,srcSet:$.srcSet,src:S||$.src},meta:{unoptimized:p,priority:g,placeholder:C,fill:b}}}},18556,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ImageConfigContext",{enumerable:!0,get:function(){return i}});let o=e.r(55682)._(e.r(71645)),r=e.r(87690),i=o.default.createContext(r.imageConfigDefault)},65856,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"RouterContext",{enumerable:!0,get:function(){return o}});let o=e.r(55682)._(e.r(71645)).default.createContext(null)},1948,(e,t,n)=>{"use strict";function o(e){var t;let{config:n,src:o,width:r,quality:i}=e,l=i||(null==(t=n.qualities)?void 0:t.reduce((e,t)=>Math.abs(t-75)<Math.abs(e-75)?t:e))||75;return n.path+"?url="+encodeURIComponent(o)+"&w="+r+"&q="+l+(o.startsWith("/_next/static/media/"),"")}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r}}),o.__next_img_default=!0;let r=o},18581,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useMergedRef",{enumerable:!0,get:function(){return r}});let o=e.r(71645);function r(e,t){let n=(0,o.useRef)(null),r=(0,o.useRef)(null);return(0,o.useCallback)(o=>{if(null===o){let e=n.current;e&&(n.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(n.current=i(e,o)),t&&(r.current=i(t,o))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},5500,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Image",{enumerable:!0,get:function(){return w}});let o=e.r(55682),r=e.r(90809),i=e.r(43476),l=r._(e.r(71645)),a=o._(e.r(74080)),u=o._(e.r(25633)),s=e.r(8927),c=e.r(87690),d=e.r(18556);e.r(33525);let f=e.r(65856),h=o._(e.r(1948)),p=e.r(18581),g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function m(e,t,n,o,r,i,l){let a=null==e?void 0:e.src;e&&e["data-loaded-src"]!==a&&(e["data-loaded-src"]=a,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&r(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let o=!1,r=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>o,isPropagationStopped:()=>r,persist:()=>{},preventDefault:()=>{o=!0,t.preventDefault()},stopPropagation:()=>{r=!0,t.stopPropagation()}})}(null==o?void 0:o.current)&&o.current(e)}}))}function v(e){return l.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let y=(0,l.forwardRef)((e,t)=>{let{src:n,srcSet:o,sizes:r,height:a,width:u,decoding:s,className:c,style:d,fetchPriority:f,placeholder:h,loading:g,unoptimized:y,fill:x,onLoadRef:w,onLoadingCompleteRef:b,setBlurComplete:_,setShowAltText:S,sizesInput:E,onLoad:M,onError:C,...k}=e,N=(0,l.useCallback)(e=>{e&&(C&&(e.src=e.src),e.complete&&m(e,h,w,b,_,y,E))},[n,h,w,b,_,C,y,E]),P=(0,p.useMergedRef)(t,N);return(0,i.jsx)("img",{...k,...v(f),loading:g,width:u,height:a,decoding:s,"data-nimg":x?"fill":"1",className:c,style:d,sizes:r,srcSet:o,src:n,ref:P,onLoad:e=>{m(e.currentTarget,h,w,b,_,y,E)},onError:e=>{S(!0),"empty"!==h&&_(!0),C&&C(e)}})});function x(e){let{isAppRouter:t,imgAttributes:n}=e,o={as:"image",imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:n.crossOrigin,referrerPolicy:n.referrerPolicy,...v(n.fetchPriority)};return t&&a.default.preload?(a.default.preload(n.src,o),null):(0,i.jsx)(u.default,{children:(0,i.jsx)("link",{rel:"preload",href:n.srcSet?void 0:n.src,...o},"__nimg-"+n.src+n.srcSet+n.sizes)})}let w=(0,l.forwardRef)((e,t)=>{let n=(0,l.useContext)(f.RouterContext),o=(0,l.useContext)(d.ImageConfigContext),r=(0,l.useMemo)(()=>{var e;let t=g||o||c.imageConfigDefault,n=[...t.deviceSizes,...t.imageSizes].sort((e,t)=>e-t),r=t.deviceSizes.sort((e,t)=>e-t),i=null==(e=t.qualities)?void 0:e.sort((e,t)=>e-t);return{...t,allSizes:n,deviceSizes:r,qualities:i}},[o]),{onLoad:a,onLoadingComplete:u}=e,p=(0,l.useRef)(a);(0,l.useEffect)(()=>{p.current=a},[a]);let m=(0,l.useRef)(u);(0,l.useEffect)(()=>{m.current=u},[u]);let[v,w]=(0,l.useState)(!1),[b,_]=(0,l.useState)(!1),{props:S,meta:E}=(0,s.getImgProps)(e,{defaultLoader:h.default,imgConf:r,blurComplete:v,showAltText:b});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{...S,unoptimized:E.unoptimized,placeholder:E.placeholder,fill:E.fill,onLoadRef:p,onLoadingCompleteRef:m,setBlurComplete:w,setShowAltText:_,sizesInput:e.sizes,ref:t}),E.priority?(0,i.jsx)(x,{isAppRouter:!n,imgAttributes:S}):null]})});("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},55838,(e,t,n)=>{"use strict";var o=e.r(71645),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useState,l=o.useEffect,a=o.useLayoutEffect,u=o.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=i({inst:{value:n,getSnapshot:t}}),r=o[0].inst,c=o[1];return a(function(){r.value=n,r.getSnapshot=t,s(r)&&c({inst:r})},[e,n,t]),l(function(){return s(r)&&c({inst:r}),e(function(){s(r)&&c({inst:r})})},[e]),u(n),n};n.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:c},2239,(e,t,n)=>{"use strict";t.exports=e.r(55838)},52822,(e,t,n)=>{"use strict";var o=e.r(71645),r=e.r(2239),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useSyncExternalStore,a=o.useRef,u=o.useEffect,s=o.useMemo,c=o.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var d=a(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=l(e,(d=s(function(){function e(e){if(!u){if(u=!0,l=e,e=o(e),void 0!==r&&f.hasValue){var t=f.value;if(r(t,e))return a=t}return a=e}if(t=a,i(l,e))return t;var n=o(e);return void 0!==r&&r(t,n)?(l=e,t):(l=e,a=n)}var l,a,u=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]},[t,n,o,r]))[0],d[1]);return u(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},30224,(e,t,n)=>{"use strict";t.exports=e.r(52822)},93657,e=>{"use strict";e.s(["default",()=>iQ],93657);var t,n,o,r,i,l,a,u,s,c=e.i(43476);e.i(47167);var d=e.i(71645);function f(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)""!==(o=f(e[n]))&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var h={value:()=>{}};function p(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw Error("illegal type: "+e);o[e]=[]}return new g(o)}function g(e){this._=e}function m(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=h,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}function v(){}function y(e){return null==e?v:function(){return this.querySelector(e)}}function x(){return[]}function w(e){return null==e?x:function(){return this.querySelectorAll(e)}}function b(e){return function(){return this.matches(e)}}function _(e){return function(t){return t.matches(e)}}g.prototype=p.prototype={constructor:g,on:function(e,t){var n,o=this._,r=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),i=-1,l=r.length;if(arguments.length<2){for(;++i<l;)if((n=(e=r[i]).type)&&(n=function(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}(o[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++i<l;)if(n=(e=r[i]).type)o[n]=m(o[n],e.name,t);else if(null==t)for(n in o)o[n]=m(o[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new g(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(o=this._[e],i=0,n=o.length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var S=Array.prototype.find;function E(){return this.firstElementChild}var M=Array.prototype.filter;function C(){return Array.from(this.children)}function k(e){return Array(e.length)}function N(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function P(e,t,n,o,r,i){for(var l,a=0,u=t.length,s=i.length;a<s;++a)(l=t[a])?(l.__data__=i[a],o[a]=l):n[a]=new N(e,i[a]);for(;a<u;++a)(l=t[a])&&(r[a]=l)}function A(e,t,n,o,r,i,l){var a,u,s,c=new Map,d=t.length,f=i.length,h=Array(d);for(a=0;a<d;++a)(u=t[a])&&(h[a]=s=l.call(u,u.__data__,a,t)+"",c.has(s)?r[a]=u:c.set(s,u));for(a=0;a<f;++a)s=l.call(e,i[a],a,i)+"",(u=c.get(s))?(o[a]=u,u.__data__=i[a],c.delete(s)):n[a]=new N(e,i[a]);for(a=0;a<d;++a)(u=t[a])&&c.get(h[a])===u&&(r[a]=u)}function j(e){return e.__data__}function z(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}N.prototype={constructor:N,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var O="http://www.w3.org/1999/xhtml";let I={svg:"http://www.w3.org/2000/svg",xhtml:O,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function R(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),I.hasOwnProperty(t)?{space:I[t],local:e}:e}function D(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function L(e,t){return e.style.getPropertyValue(t)||D(e).getComputedStyle(e,null).getPropertyValue(t)}function B(e){return e.trim().split(/^|\s+/)}function T(e){return e.classList||new H(e)}function H(e){this._node=e,this._names=B(e.getAttribute("class")||"")}function V(e,t){for(var n=T(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function F(e,t){for(var n=T(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function X(){this.textContent=""}function Y(){this.innerHTML=""}function Z(){this.nextSibling&&this.parentNode.appendChild(this)}function q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function W(e){var t=R(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===O&&t.documentElement.namespaceURI===O?t.createElement(e):t.createElementNS(n,e)}})(t)}function K(){return null}function U(){var e=this.parentNode;e&&e.removeChild(this)}function G(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Q(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)(n=t[o],e.type&&n.type!==e.type||n.name!==e.name)?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function J(e,t,n){return function(){var o,r=this.__on,i=function(e){t.call(this,e,this.__data__)};if(r){for(var l=0,a=r.length;l<a;++l)if((o=r[l]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ee(e,t,n){var o=D(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}H.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var et=[null];function en(e,t){this._groups=e,this._parents=t}function eo(){return new en([[document.documentElement]],et)}function er(e){return"string"==typeof e?new en([[document.querySelector(e)]],[document.documentElement]):new en([[e]],et)}function ei(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}en.prototype=eo.prototype={constructor:en,select:function(e){"function"!=typeof e&&(e=y(e));for(var t=this._groups,n=t.length,o=Array(n),r=0;r<n;++r)for(var i,l,a=t[r],u=a.length,s=o[r]=Array(u),c=0;c<u;++c)(i=a[c])&&(l=e.call(i,i.__data__,c,a))&&("__data__"in i&&(l.__data__=i.__data__),s[c]=l);return new en(o,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=w(e);for(var n=this._groups,o=n.length,r=[],i=[],l=0;l<o;++l)for(var a,u=n[l],s=u.length,c=0;c<s;++c)(a=u[c])&&(r.push(e.call(a,a.__data__,c,u)),i.push(a));return new en(r,i)},selectChild:function(e){var t;return this.select(null==e?E:(t="function"==typeof e?e:_(e),function(){return S.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?C:(t="function"==typeof e?e:_(e),function(){return M.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=b(e));for(var t=this._groups,n=t.length,o=Array(n),r=0;r<n;++r)for(var i,l=t[r],a=l.length,u=o[r]=[],s=0;s<a;++s)(i=l[s])&&e.call(i,i.__data__,s,l)&&u.push(i);return new en(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,j);var n=t?A:P,o=this._parents,r=this._groups;"function"!=typeof e&&(y=e,e=function(){return y});for(var i=r.length,l=Array(i),a=Array(i),u=Array(i),s=0;s<i;++s){var c=o[s],d=r[s],f=d.length,h="object"==typeof(v=e.call(c,c&&c.__data__,s,o))&&"length"in v?v:Array.from(v),p=h.length,g=a[s]=Array(p),m=l[s]=Array(p);n(c,d,g,m,u[s]=Array(f),h,t);for(var v,y,x,w,b=0,_=0;b<p;++b)if(x=g[b]){for(b>=_&&(_=b+1);!(w=m[_])&&++_<p;);x._next=w||null}}return(l=new en(l,o))._enter=a,l._exit=u,l},enter:function(){return new en(this._enter||this._groups.map(k),this._parents)},exit:function(){return new en(this._exit||this._groups.map(k),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,l=Math.min(r,i),a=Array(r),u=0;u<l;++u)for(var s,c=n[u],d=o[u],f=c.length,h=a[u]=Array(f),p=0;p<f;++p)(s=c[p]||d[p])&&(h[p]=s);for(;u<r;++u)a[u]=n[u];return new en(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,l=r[i];--i>=0;)(o=r[i])&&(l&&4^o.compareDocumentPosition(l)&&l.parentNode.insertBefore(o,l),l=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=z);for(var n=this._groups,o=n.length,r=Array(o),i=0;i<o;++i){for(var l,a=n[i],u=a.length,s=r[i]=Array(u),c=0;c<u;++c)(l=a[c])&&(s[c]=l);s.sort(t)}return new en(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var l=o[r];if(l)return l}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],l=0,a=i.length;l<a;++l)(r=i[l])&&e.call(r,r.__data__,l,i);return this},attr:function(e,t){var n=R(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):L(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=B(e+"");if(arguments.length<2){for(var o=T(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?V:F)(this,e)}}:t?function(e){return function(){V(this,e)}}:function(e){return function(){F(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?X:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Z)},lower:function(){return this.each(q)},append:function(e){var t="function"==typeof e?e:W(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:W(e),o=null==t?K:"function"==typeof t?t:y(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function(){return this.each(U)},clone:function(e){return this.select(e?Q:G)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),l=i.length;if(arguments.length<2){var a=this.node().__on;if(a){for(var u,s=0,c=a.length;s<c;++s)for(o=0,u=a[s];o<l;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value}return}for(o=0,a=t?J:$;o<l;++o)this.each(a(i[o],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return ee(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return ee(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,l=r.length;i<l;++i)(o=r[i])&&(yield o)}};let el={passive:!1},ea={capture:!0,passive:!1};function eu(e){e.stopImmediatePropagation()}function es(e){e.preventDefault(),e.stopImmediatePropagation()}function ec(e){var t=e.document.documentElement,n=er(e).on("dragstart.drag",es,ea);"onselectstart"in t?n.on("selectstart.drag",es,ea):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ed(e,t){var n=e.document.documentElement,o=er(e).on("dragstart.drag",null);t&&(o.on("click.drag",es,ea),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let ef=e=>()=>e;function eh(e,t){let{sourceEvent:n,subject:o,target:r,identifier:i,active:l,x:a,y:u,dx:s,dy:c,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function ep(e){return!e.ctrlKey&&!e.button}function eg(){return this.parentNode}function em(e,t){return null==t?{x:e.x,y:e.y}:t}function ev(){return navigator.maxTouchPoints||"ontouchstart"in this}function ey(){var e,t,n,o,r=ep,i=eg,l=em,a=ev,u={},s=p("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(a).on("touchstart.drag",v).on("touchmove.drag",y,el).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(l,a){if(!o&&r.call(this,l,a)){var u=w(this,i.call(this,l,a),l,a,"mouse");u&&(er(l.view).on("mousemove.drag",g,ea).on("mouseup.drag",m,ea),ec(l.view),eu(l),n=!1,e=l.clientX,t=l.clientY,u("start",l))}}function g(o){if(es(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}u.mouse("drag",o)}function m(e){er(e.view).on("mousemove.drag mouseup.drag",null),ed(e.view,n),es(e),u.mouse("end",e)}function v(e,t){if(r.call(this,e,t)){var n,o,l=e.changedTouches,a=i.call(this,e,t),u=l.length;for(n=0;n<u;++n)(o=w(this,a,e,t,l[n].identifier,l[n]))&&(eu(e),o("start",e,l[n]))}}function y(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=u[o[t].identifier])&&(es(e),n("drag",e,o[t]))}function x(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<i;++t)(n=u[r[t].identifier])&&(eu(e),n("end",e,r[t]))}function w(e,t,n,o,r,i){var a,d,h,p=s.copy(),g=ei(i||n,t);if(null!=(h=l.call(e,new eh("beforestart",{sourceEvent:n,target:f,identifier:r,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),o)))return a=h.x-g[0]||0,d=h.y-g[1]||0,function n(i,l,s){var m,v=g;switch(i){case"start":u[r]=n,m=c++;break;case"end":delete u[r],--c;case"drag":g=ei(s||l,t),m=c}p.call(i,e,new eh(i,{sourceEvent:l,subject:h,target:f,identifier:r,active:m,x:g[0]+a,y:g[1]+d,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),o)}}return f.filter=function(e){return arguments.length?(r="function"==typeof e?e:ef(!!e),f):r},f.container=function(e){return arguments.length?(i="function"==typeof e?e:ef(e),f):i},f.subject=function(e){return arguments.length?(l="function"==typeof e?e:ef(e),f):l},f.touchable=function(e){return arguments.length?(a="function"==typeof e?e:ef(!!e),f):a},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,f):Math.sqrt(d)},f}function ex(e){return((e=Math.exp(e))+1/e)/2}eh.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let ew=function e(t,n,o){function r(e,r){var i,l,a=e[0],u=e[1],s=e[2],c=r[0],d=r[1],f=r[2],h=c-a,p=d-u,g=h*h+p*p;if(g<1e-12)l=Math.log(f/s)/t,i=function(e){return[a+e*h,u+e*p,s*Math.exp(t*e*l)]};else{var m=Math.sqrt(g),v=(f*f-s*s+o*g)/(2*s*n*m),y=(f*f-s*s-o*g)/(2*f*n*m),x=Math.log(Math.sqrt(v*v+1)-v);l=(Math.log(Math.sqrt(y*y+1)-y)-x)/t,i=function(e){var o,r,i=e*l,c=ex(x),d=s/(n*m)*(c*(((o=Math.exp(2*(o=t*i+x)))-1)/(o+1))-((r=Math.exp(r=x))-1/r)/2);return[a+d*h,u+d*p,s*c/ex(t*i+x)]}}return i.duration=1e3*l*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var eb,e_,eS=0,eE=0,eM=0,eC=0,ek=0,eN=0,eP="object"==typeof performance&&performance.now?performance:Date,eA="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ej(){return ek||(eA(ez),ek=eP.now()+eN)}function ez(){ek=0}function eO(){this._call=this._time=this._next=null}function eI(e,t,n){var o=new eO;return o.restart(e,t,n),o}function eR(){ek=(eC=eP.now())+eN,eS=eE=0;try{ej(),++eS;for(var e,t=eb;t;)(e=ek-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eS}finally{eS=0,function(){for(var e,t,n=eb,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:eb=t);e_=e,eL(o)}(),ek=0}}function eD(){var e=eP.now(),t=e-eC;t>1e3&&(eN-=t,eC=e)}function eL(e){!eS&&(eE&&(eE=clearTimeout(eE)),e-ek>24?(e<1/0&&(eE=setTimeout(eR,e-eP.now()-eN)),eM&&(eM=clearInterval(eM))):(eM||(eC=eP.now(),eM=setInterval(eD,1e3)),eS=1,eA(eR)))}function eB(e,t,n){var o=new eO;return t=null==t?0:+t,o.restart(n=>{o.stop(),e(n+t)},t,n),o}eO.prototype=eI.prototype={constructor:eO,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?ej():+n)+(null==t?0:+t),this._next||e_===this||(e_?e_._next=this:eb=this,e_=this),this._call=e,this._time=n,eL()},stop:function(){this._call&&(this._call=null,this._time=1/0,eL())}};var eT=p("start","end","cancel","interrupt"),eH=[];function eV(e,t,n,o,r,i){var l=e.__transition;if(l){if(n in l)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(u){var s,c,d,f;if(1!==n.state)return a();for(s in r)if((f=r[s]).name===n.name){if(3===f.state)return eB(i);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[s]):+s<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[s])}if(eB(function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(s=0,n.state=3,o=Array(d=n.tween.length),c=-1;s<d;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=f);o.length=c+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=5,1),i=-1,l=o.length;++i<l;)o[i].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var o in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=eI(function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:o,group:r,on:eT,tween:eH,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function eF(e,t){var n=eY(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eX(e,t){var n=eY(e,t);if(n.state>3)throw Error("too late; already running");return n}function eY(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function eZ(e,t){var n,o,r,i=e.__transition,l=!0;if(i){for(r in t=null==t?null:t+"",i){if((n=i[r]).name!==t){l=!1;continue}o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]}l&&delete e.__transition}}function eq(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var eW=180/Math.PI,eK={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eU(e,t,n,o,r,i){var l,a,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,u/=a),e*o<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*eW,skewX:Math.atan(u)*eW,scaleX:l,scaleY:a}}function eG(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,l){var a,u,s,c,d=[],f=[];return i=e(i),l=e(l),!function(e,o,r,i,l,a){if(e!==r||o!==i){var u=l.push("translate(",null,t,null,n);a.push({i:u-4,x:eq(e,r)},{i:u-2,x:eq(o,i)})}else(r||i)&&l.push("translate("+r+t+i+n)}(i.translateX,i.translateY,l.translateX,l.translateY,d,f),a=i.rotate,u=l.rotate,a!==u?(a-u>180?u+=360:u-a>180&&(a+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:eq(a,u)})):u&&d.push(r(d)+"rotate("+u+o),s=i.skewX,c=l.skewX,s!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:eq(s,c)}):c&&d.push(r(d)+"skewX("+c+o),!function(e,t,n,o,i,l){if(e!==n||t!==o){var a=i.push(r(i)+"scale(",null,",",null,")");l.push({i:a-4,x:eq(e,n)},{i:a-2,x:eq(t,o)})}else(1!==n||1!==o)&&i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,l.scaleX,l.scaleY,d,f),i=l=null,function(e){for(var t,n=-1,o=f.length;++n<o;)d[(t=f[n]).i]=t.x(e);return d.join("")}}}var eQ=eG(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eK:eU(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),e$=eG(function(e){return null==e?eK:(t||(t=document.createElementNS("http://www.w3.org/2000/svg","g")),t.setAttribute("transform",e),e=t.transform.baseVal.consolidate())?eU((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):eK},", ",")",")");function eJ(e,t,n){var o=e._id;return e.each(function(){var e=eX(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return eY(e,o).value[t]}}function e0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function e1(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function e2(){}var e5="\\s*([+-]?\\d+)\\s*",e3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e4="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e8=/^#([0-9a-f]{3,8})$/,e6=new RegExp("^rgb\\(".concat(e5,",").concat(e5,",").concat(e5,"\\)$")),e9=new RegExp("^rgb\\(".concat(e4,",").concat(e4,",").concat(e4,"\\)$")),e7=new RegExp("^rgba\\(".concat(e5,",").concat(e5,",").concat(e5,",").concat(e3,"\\)$")),te=new RegExp("^rgba\\(".concat(e4,",").concat(e4,",").concat(e4,",").concat(e3,"\\)$")),tt=new RegExp("^hsl\\(".concat(e3,",").concat(e4,",").concat(e4,"\\)$")),tn=new RegExp("^hsla\\(".concat(e3,",").concat(e4,",").concat(e4,",").concat(e3,"\\)$")),to={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function tr(){return this.rgb().formatHex()}function ti(){return this.rgb().formatRgb()}function tl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=e8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ta(t):3===n?new tc(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?tu(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?tu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=e6.exec(e))?new tc(t[1],t[2],t[3],1):(t=e9.exec(e))?new tc(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=e7.exec(e))?tu(t[1],t[2],t[3],t[4]):(t=te.exec(e))?tu(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=tt.exec(e))?tm(t[1],t[2]/100,t[3]/100,1):(t=tn.exec(e))?tm(t[1],t[2]/100,t[3]/100,t[4]):to.hasOwnProperty(e)?ta(to[e]):"transparent"===e?new tc(NaN,NaN,NaN,0):null}function ta(e){return new tc(e>>16&255,e>>8&255,255&e,1)}function tu(e,t,n,o){return o<=0&&(e=t=n=NaN),new tc(e,t,n,o)}function ts(e,t,n,o){var r;return 1==arguments.length?((r=e)instanceof e2||(r=tl(r)),r)?new tc((r=r.rgb()).r,r.g,r.b,r.opacity):new tc:new tc(e,t,n,null==o?1:o)}function tc(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function td(){return"#".concat(tg(this.r)).concat(tg(this.g)).concat(tg(this.b))}function tf(){let e=th(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(tp(this.r),", ").concat(tp(this.g),", ").concat(tp(this.b)).concat(1===e?")":", ".concat(e,")"))}function th(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tg(e){return((e=tp(e))<16?"0":"")+e.toString(16)}function tm(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ty(e,t,n,o)}function tv(e){if(e instanceof ty)return new ty(e.h,e.s,e.l,e.opacity);if(e instanceof e2||(e=tl(e)),!e)return new ty;if(e instanceof ty)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),l=NaN,a=i-r,u=(i+r)/2;return a?(l=t===i?(n-o)/a+(n<o)*6:n===i?(o-t)/a+2:(t-n)/a+4,a/=u<.5?i+r:2-i-r,l*=60):a=u>0&&u<1?0:l,new ty(l,a,u,e.opacity)}function ty(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function tx(e){return(e=(e||0)%360)<0?e+360:e}function tw(e){return Math.max(0,Math.min(1,e||0))}function tb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function t_(e,t,n,o,r){var i=e*e,l=i*e;return((1-3*e+3*i-l)*t+(4-6*i+3*l)*n+(1+3*e+3*i-3*l)*o+l*r)/6}e0(e2,tl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tr,formatHex:tr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tv(this).formatHsl()},formatRgb:ti,toString:ti}),e0(tc,ts,e1(e2,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tc(tp(this.r),tp(this.g),tp(this.b),th(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:td,formatHex:td,formatHex8:function(){return"#".concat(tg(this.r)).concat(tg(this.g)).concat(tg(this.b)).concat(tg((isNaN(this.opacity)?1:this.opacity)*255))},formatRgb:tf,toString:tf})),e0(ty,function(e,t,n,o){return 1==arguments.length?tv(e):new ty(e,t,n,null==o?1:o)},e1(e2,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new ty(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new ty(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new tc(tb(e>=240?e-240:e+120,r,o),tb(e,r,o),tb(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ty(tx(this.h),tw(this.s),tw(this.l),th(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=th(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(tx(this.h),", ").concat(100*tw(this.s),"%, ").concat(100*tw(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));let tS=e=>()=>e;function tE(e,t){var n=t-e;return n?function(t){return e+t*n}:tS(isNaN(e)?t:e)}let tM=function e(t){var n,o=1==(n=+t)?tE:function(e,t){var o,r,i;return t-e?(o=e,r=t,o=Math.pow(o,i=n),r=Math.pow(r,i)-o,i=1/i,function(e){return Math.pow(o+e*r,i)}):tS(isNaN(e)?t:e)};function r(e,t){var n=o((e=ts(e)).r,(t=ts(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),l=tE(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=l(t),e+""}}return r.gamma=e,r}(1);function tC(e){return function(t){var n,o,r=t.length,i=Array(r),l=Array(r),a=Array(r);for(n=0;n<r;++n)o=ts(t[n]),i[n]=o.r||0,l[n]=o.g||0,a[n]=o.b||0;return i=e(i),l=e(l),a=e(a),o.opacity=1,function(e){return o.r=i(e),o.g=l(e),o.b=a(e),o+""}}}tC(function(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[o],i=e[o+1],l=o>0?e[o-1]:2*r-i,a=o<t-1?e[o+2]:2*i-r;return t_((n-o/t)*t,l,r,i,a)}}),tC(function(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),r=e[(o+t-1)%t],i=e[o%t],l=e[(o+1)%t],a=e[(o+2)%t];return t_((n-o/t)*t,r,i,l,a)}});var tk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tN=RegExp(tk.source,"g");function tP(e,t){var n,o,r,i,l,a=tk.lastIndex=tN.lastIndex=0,u=-1,s=[],c=[];for(e+="",t+="";(r=tk.exec(e))&&(i=tN.exec(t));)(l=i.index)>a&&(l=t.slice(a,l),s[u]?s[u]+=l:s[++u]=l),(r=r[0])===(i=i[0])?s[u]?s[u]+=i:s[++u]=i:(s[++u]=null,c.push({i:u,x:eq(r,i)})),a=tN.lastIndex;return a<t.length&&(l=t.slice(a),s[u]?s[u]+=l:s[++u]=l),s.length<2?c[0]?(n=c[0].x,function(e){return n(e)+""}):(o=t,function(){return o}):(t=c.length,function(e){for(var n,o=0;o<t;++o)s[(n=c[o]).i]=n.x(e);return s.join("")})}function tA(e,t){var n;return("number"==typeof t?eq:t instanceof tl?tM:(n=tl(t))?(t=n,tM):tP)(e,t)}var tj=eo.prototype.constructor;function tz(e){return function(){this.style.removeProperty(e)}}var tO=0;function tI(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}var tR=eo.prototype;tI.prototype=(function(e){return eo().transition(e)}).prototype={constructor:tI,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=y(e));for(var o=this._groups,r=o.length,i=Array(r),l=0;l<r;++l)for(var a,u,s=o[l],c=s.length,d=i[l]=Array(c),f=0;f<c;++f)(a=s[f])&&(u=e.call(a,a.__data__,f,s))&&("__data__"in a&&(u.__data__=a.__data__),d[f]=u,eV(d[f],t,n,f,d,eY(a,n)));return new tI(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=w(e));for(var o=this._groups,r=o.length,i=[],l=[],a=0;a<r;++a)for(var u,s=o[a],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var f,h=e.call(u,u.__data__,d,s),p=eY(u,n),g=0,m=h.length;g<m;++g)(f=h[g])&&eV(f,t,n,g,h,p);i.push(h),l.push(u)}return new tI(i,l,t,n)},selectChild:tR.selectChild,selectChildren:tR.selectChildren,filter:function(e){"function"!=typeof e&&(e=b(e));for(var t=this._groups,n=t.length,o=Array(n),r=0;r<n;++r)for(var i,l=t[r],a=l.length,u=o[r]=[],s=0;s<a;++s)(i=l[s])&&e.call(i,i.__data__,s,l)&&u.push(i);return new tI(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),l=Array(o),a=0;a<i;++a)for(var u,s=t[a],c=n[a],d=s.length,f=l[a]=Array(d),h=0;h<d;++h)(u=s[h]||c[h])&&(f[h]=u);for(;a<o;++a)l[a]=t[a];return new tI(l,this._parents,this._name,this._id)},selection:function(){return new tj(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++tO,o=this._groups,r=o.length,i=0;i<r;++i)for(var l,a=o[i],u=a.length,s=0;s<u;++s)if(l=a[s]){var c=eY(l,t);eV(l,e,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tI(o,this._parents,e,n)},call:tR.call,nodes:tR.nodes,node:tR.node,size:tR.size,empty:tR.empty,each:tR.each,on:function(e,t){var n,o,r,i,l,a,u=this._id;return arguments.length<2?eY(this.node(),u).on.on(e):this.each((n=u,o=e,r=t,a=(o+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eF:eX,function(){var e=a(this,n),t=e.on;t!==i&&(l=(i=t).copy()).on(o,r),e.on=l}))},attr:function(e,t){var n=R(e),o="transform"===n?e$:tA;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var o,r,i;return function(){var l,a,u=n(this);return null==u?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local))===(a=u+"")?null:l===o&&a===r?i:(r=a,i=t(o=l,u))}}:function(e,t,n){var o,r,i;return function(){var l,a,u=n(this);return null==u?void this.removeAttribute(e):(l=this.getAttribute(e))===(a=u+"")?null:l===o&&a===r?i:(r=a,i=t(o=l,u))}})(n,o,eJ(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var o,r,i=n+"";return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?r:r=t(o=l,n)}}:function(e,t,n){var o,r,i=n+"";return function(){var l=this.getAttribute(e);return l===i?null:l===o?r:r=t(o=l,n)}})(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var o=R(e);return this.tween(n,(o.local?function(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(t){this.setAttributeNS(e.space,e.local,r.call(this,t))}),n}return r._value=t,r}:function(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(t){this.setAttribute(e,r.call(this,t))}),n}return r._value=t,r})(o,t))},style:function(e,t,n){var o,r,i,l,a,u,s,c,d,f,h,p,g,m,v,y,x,w,b,_,S,E="transform"==(e+="")?eQ:tA;return null==t?this.styleTween(e,(o=e,function(){var e=L(this,o),t=(this.style.removeProperty(o),L(this,o));return e===t?null:e===r&&t===i?l:l=E(r=e,i=t)})).on("end.style."+e,tz(e)):"function"==typeof t?this.styleTween(e,(a=e,u=eJ(this,"style."+e,t),function(){var e=L(this,a),t=u(this),n=t+"";return null==t&&(this.style.removeProperty(a),n=t=L(this,a)),e===n?null:e===s&&n===c?d:(c=n,d=E(s=e,t))})).each((f=this._id,x="end."+(y="style."+(h=e)),function(){var e=eX(this,f),t=e.on,n=null==e.value[y]?v||(v=tz(h)):void 0;(t!==p||m!==n)&&(g=(p=t).copy()).on(x,m=n),e.on=g})):this.styleTween(e,(w=e,S=t+"",function(){var e=L(this,w);return e===S?null:e===b?_:_=E(b=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw Error();return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(t){this.style.setProperty(e,i.call(this,t),n)}),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=eJ(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){this.textContent=o.call(this,e)}),t}return o._value=e,o}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=eY(this.node(),n).tween,i=0,l=r.length;i<l;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?function(e,t){var n,o;return function(){var r=eX(this,e),i=r.tween;if(i!==n){o=n=i;for(var l=0,a=o.length;l<a;++l)if(o[l].name===t){(o=o.slice()).splice(l,1);break}}r.tween=o}}:function(e,t,n){var o,r;if("function"!=typeof n)throw Error();return function(){var i=eX(this,e),l=i.tween;if(l!==o){r=(o=l).slice();for(var a={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=a;break}u===s&&r.push(a)}i.tween=r}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eF(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eF(this,e).delay=t}})(t,e)):eY(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eX(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eX(this,e).duration=t}})(t,e)):eY(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eX(this,e).ease=t}}(t,e)):eY(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eX(this,t).ease=n}))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,l){var a={value:l},u={value:function(){0==--r&&i()}};n.each(function(){var n=eX(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),n.on=t}),0===r&&i()})},[Symbol.iterator]:tR[Symbol.iterator]};var tD={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};eo.prototype.interrupt=function(e){return this.each(function(){eZ(this,e)})},eo.prototype.transition=function(e){var t,n;e instanceof tI?(t=e._id,e=e._name):(t=++tO,(n=tD).time=ej(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var l,a=o[i],u=a.length,s=0;s<u;++s)(l=a[s])&&eV(l,e,t,s,a,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error("transition ".concat(t," not found"));return n}(l,t));return new tI(o,this._parents,e,t)};let tL=e=>()=>e;function tB(e,t){let{sourceEvent:n,target:o,transform:r,dispatch:i}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function tT(e,t,n){this.k=e,this.x=t,this.y=n}tT.prototype={constructor:tT,scale:function(e){return 1===e?this:new tT(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tH=new tT(1,0,0);function tV(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tH;return e.__zoom}function tF(e){e.stopImmediatePropagation()}function tX(e){e.preventDefault(),e.stopImmediatePropagation()}function tY(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tZ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tq(){return this.__zoom||tH}function tW(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tK(){return navigator.maxTouchPoints||"ontouchstart"in this}function tU(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l))}function tG(){var e,t,n,o=tY,r=tZ,i=tU,l=tW,a=tK,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=ew,f=p("start","zoom","end"),h=0,g=10;function m(e){e.property("__zoom",tq).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",C).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new tT(t,e.x,e.y)}function y(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new tT(e.k,o,r)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",function(){b(this,arguments).event(o).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(o).end()}).tween("zoom",function(){var e=arguments,i=b(this,e).event(o),l=r.apply(this,e),a=null==n?x(l):"function"==typeof n?n.apply(this,e):n,u=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),s=this.__zoom,c="function"==typeof t?t.apply(this,e):t,f=d(s.invert(a).concat(u/s.k),c.invert(a).concat(u/c.k));return function(e){if(1===e)e=c;else{var t=f(e),n=u/t[2];e=new tT(n,a[0]-t[0]*n,a[1]-t[1]*n)}i.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function S(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(o.apply(this,arguments)){var a=b(this,n).event(e),c=this.__zoom,d=Math.max(u[0],Math.min(u[1],c.k*Math.pow(2,l.apply(this,arguments)))),f=ei(e);if(a.wheel)(a.mouse[0][0]!==f[0]||a.mouse[0][1]!==f[1])&&(a.mouse[1]=c.invert(a.mouse[0]=f)),clearTimeout(a.wheel);else{if(c.k===d)return;a.mouse=[f,c.invert(f)],eZ(this),a.start()}tX(e),a.wheel=setTimeout(function(){a.wheel=null,a.end()},150),a.zoom("mouse",i(y(v(c,d),a.mouse[0],a.mouse[1]),a.extent,s))}}function E(e){for(var t=arguments.length,r=Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];if(!n&&o.apply(this,arguments)){var a=e.currentTarget,u=b(this,r,!0).event(e),c=er(e.view).on("mousemove.zoom",function(e){if(tX(e),!u.moved){var t=e.clientX-f,n=e.clientY-p;u.moved=t*t+n*n>h}u.event(e).zoom("mouse",i(y(u.that.__zoom,u.mouse[0]=ei(e,a),u.mouse[1]),u.extent,s))},!0).on("mouseup.zoom",function(e){c.on("mousemove.zoom mouseup.zoom",null),ed(e.view,u.moved),tX(e),u.event(e).end()},!0),d=ei(e,a),f=e.clientX,p=e.clientY;ec(e.view),tF(e),u.mouse=[d,this.__zoom.invert(d)],eZ(this),u.start()}}function M(e){for(var t=arguments.length,n=Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];if(o.apply(this,arguments)){var a=this.__zoom,u=ei(e.changedTouches?e.changedTouches[0]:e,this),d=a.invert(u),f=a.k*(e.shiftKey?.5:2),h=i(y(v(a,f),u,d),r.apply(this,n),s);tX(e),c>0?er(this).transition().duration(c).call(w,h,u,e):er(this).call(m.transform,h,u,e)}}function C(n){for(var r=arguments.length,i=Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];if(o.apply(this,arguments)){var a,u,s,c,d=n.touches,f=d.length,h=b(this,i,n.changedTouches.length===f).event(n);for(tF(n),u=0;u<f;++u)c=[c=ei(s=d[u],this),this.__zoom.invert(c),s.identifier],h.touch0?h.touch1||h.touch0[2]===c[2]||(h.touch1=c,h.taps=0):(h.touch0=c,a=!0,h.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(h.taps<2&&(t=c[0],e=setTimeout(function(){e=null},500)),eZ(this),h.start())}}function k(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(this.__zooming){var r,l,a,u,c=b(this,n).event(e),d=e.changedTouches,f=d.length;for(tX(e),r=0;r<f;++r)a=ei(l=d[r],this),c.touch0&&c.touch0[2]===l.identifier?c.touch0[0]=a:c.touch1&&c.touch1[2]===l.identifier&&(c.touch1[0]=a);if(l=c.that.__zoom,c.touch1){var h=c.touch0[0],p=c.touch0[1],g=c.touch1[0],m=c.touch1[1],x=(x=g[0]-h[0])*x+(x=g[1]-h[1])*x,w=(w=m[0]-p[0])*w+(w=m[1]-p[1])*w;l=v(l,Math.sqrt(x/w)),a=[(h[0]+g[0])/2,(h[1]+g[1])/2],u=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!c.touch0)return;a=c.touch0[0],u=c.touch0[1]}c.zoom("touch",i(y(l,a,u),c.extent,s))}}function N(e){for(var o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];if(this.__zooming){var l,a,u=b(this,r).event(e),s=e.changedTouches,c=s.length;for(tF(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),l=0;l<c;++l)a=s[l],u.touch0&&u.touch0[2]===a.identifier?delete u.touch0:u.touch1&&u.touch1[2]===a.identifier&&delete u.touch1;if(u.touch1&&!u.touch0&&(u.touch0=u.touch1,delete u.touch1),u.touch0)u.touch0[1]=this.__zoom.invert(u.touch0[0]);else if(u.end(),2===u.taps&&(a=ei(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<g)){var d=er(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return m.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",tq),e!==r?w(e,t,n,o):r.interrupt().each(function(){b(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,o){m.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,o)},m.scaleTo=function(e,t,n,o){m.transform(e,function(){var e=r.apply(this,arguments),o=this.__zoom,l=null==n?x(e):"function"==typeof n?n.apply(this,arguments):n,a=o.invert(l),u="function"==typeof t?t.apply(this,arguments):t;return i(y(v(o,u),l,a),e,s)},n,o)},m.translateBy=function(e,t,n,o){m.transform(e,function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),s)},null,o)},m.translateTo=function(e,t,n,o,l){m.transform(e,function(){var e=r.apply(this,arguments),l=this.__zoom,a=null==o?x(e):"function"==typeof o?o.apply(this,arguments):o;return i(tH.translate(a[0],a[1]).scale(l.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)},o,l)},_.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=er(this.that).datum();f.call(e,this.that,new tB(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(l="function"==typeof e?e:tL(+e),m):l},m.filter=function(e){return arguments.length?(o="function"==typeof e?e:tL(!!e),m):o},m.touchable=function(e){return arguments.length?(a="function"==typeof e?e:tL(!!e),m):a},m.extent=function(e){return arguments.length?(r="function"==typeof e?e:tL([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):r},m.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],m):[u[0],u[1]]},m.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(h=(e*=1)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}function tQ(e,t){var n,o,r=typeof t;return null==t||"boolean"===r?tS(t):("number"===r?eq:"string"===r?(o=tl(t))?(t=o,tM):tP:t instanceof tl?tM:t instanceof Date?function(e,t){var n=new Date;return e*=1,t*=1,function(o){return n.setTime(e*(1-o)+t*o),n}}:!ArrayBuffer.isView(n=t)||n instanceof DataView?Array.isArray(t)?function(e,t){var n,o=t?t.length:0,r=e?Math.min(o,e.length):0,i=Array(r),l=Array(o);for(n=0;n<r;++n)i[n]=tQ(e[n],t[n]);for(;n<o;++n)l[n]=t[n];return function(e){for(n=0;n<r;++n)l[n]=i[n](e);return l}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var n,o={},r={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?o[n]=tQ(e[n],t[n]):r[n]=t[n];return function(e){for(n in o)r[n]=o[n](e);return r}}:eq:function(e,t){t||(t=[]);var n,o=e?Math.min(t.length,e.length):0,r=t.slice();return function(i){for(n=0;n<o;++n)r[n]=e[n]*(1-i)+t[n]*i;return r}})(e,t)}tV.prototype=tT.prototype;let t$={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error003:e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error009:e=>'Marker type "'.concat(e,"\" doesn't exist."),error008:(e,t)=>{let{id:n,sourceHandle:o,targetHandle:r}=t;return"Couldn't create edge for ".concat(e,' handle id: "').concat("source"===e?o:r,'", edge id: ').concat(n,".")},error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),error012:e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},tJ=[[-1/0,-1/0],[1/0,1/0]],t0=["Enter"," ","Escape"],t1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":e=>{let{direction:t,x:n,y:o}=e;return"Moved selected node ".concat(t,". New position, x: ").concat(n,", y: ").concat(o)},"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};!function(e){e.Strict="strict",e.Loose="loose"}(n||(n={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(o||(o={})),function(e){e.Partial="partial",e.Full="full"}(r||(r={}));let t2={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(i||(i={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(l||(l={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(a||(a={}));let t5={[a.Left]:a.Right,[a.Right]:a.Left,[a.Top]:a.Bottom,[a.Bottom]:a.Top};function t3(e){return null===e?null:e?"valid":"invalid"}let t4=e=>"id"in e&&"source"in e&&"target"in e,t8=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),t6=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],{width:o,height:r}=nC(e),i=null!=(t=e.origin)?t:n,l=o*i[0],a=r*i[1];return{x:e.position.x-l,y:e.position.y-a}},t9=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nodeOrigin:[0,0]};return 0===e.length?{x:0,y:0,width:0,height:0}:nd(e.reduce((e,n)=>{let o="string"==typeof n,r=t.nodeLookup||o?void 0:n;return t.nodeLookup&&(r=o?t.nodeLookup.get(n):t8(n)?n:t.nodeLookup.get(n.id)),ns(e,r?nh(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}))},t7=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){let t=nh(e);n=ns(n,t)}}),nd(n)},ne=function(e,t){let[n,o,r]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={...nw(t,[n,o,r]),width:t.width/r,height:t.height/r},u=[];for(let t of e.values()){var s,c,d,f,h,p;let{measured:e,selectable:n=!0,hidden:o=!1}=t;if(l&&!n||o)continue;let r=null!=(d=null!=(c=null!=(s=e.width)?s:t.width)?c:t.initialWidth)?d:null,g=null!=(p=null!=(h=null!=(f=e.height)?f:t.height)?h:t.initialHeight)?p:null,m=ng(a,nf(t)),v=(null!=r?r:0)*(null!=g?g:0),y=i&&m>0;(!t.internals.handleBounds||y||m>=v||t.dragging)&&u.push(t)}return u};async function nt(e,t){var n,o,r;let{nodes:i,width:l,height:a,panZoom:u,minZoom:s,maxZoom:c}=e;if(0===i.size)return Promise.resolve(!0);let d=nS(t7(function(e,t){let n=new Map,o=(null==t?void 0:t.nodes)?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{e.measured.width&&e.measured.height&&((null==t?void 0:t.includeHiddenNodes)||!e.hidden)&&(!o||o.has(e.id))&&n.set(e.id,e)}),n}(i,t)),l,a,null!=(n=null==t?void 0:t.minZoom)?n:s,null!=(o=null==t?void 0:t.maxZoom)?o:c,null!=(r=null==t?void 0:t.padding)?r:.1);return await u.setViewport(d,{duration:null==t?void 0:t.duration,ease:null==t?void 0:t.ease,interpolate:null==t?void 0:t.interpolate}),Promise.resolve(!0)}function nn(e){var t,n,o;let{nodeId:r,nextPosition:i,nodeLookup:l,nodeOrigin:a=[0,0],nodeExtent:u,onError:s}=e,c=l.get(r),d=c.parentId?l.get(c.parentId):void 0,{x:f,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=null!=(t=c.origin)?t:a,g=c.extent||u;if("parent"!==c.extent||c.expandParent)d&&nM(c.extent)&&(g=[[c.extent[0][0]+f,c.extent[0][1]+h],[c.extent[1][0]+f,c.extent[1][1]+h]]);else if(d){let e=d.measured.width,t=d.measured.height;e&&t&&(g=[[f,h],[f+e,h+t]])}else null==s||s("005",t$.error005());let m=nM(g)?ni(i,g,c.measured):i;return(void 0===c.measured.width||void 0===c.measured.height)&&(null==s||s("015",t$.error015())),{position:{x:m.x-f+(null!=(n=c.measured.width)?n:0)*p[0],y:m.y-h+(null!=(o=c.measured.height)?o:0)*p[1]},positionAbsolute:m}}async function no(e){let{nodesToRemove:t=[],edgesToRemove:n=[],nodes:o,edges:r,onBeforeDelete:i}=e,l=new Set(t.map(e=>e.id)),a=[];for(let e of o){if(!1===e.deletable)continue;let t=l.has(e.id),n=!t&&e.parentId&&a.find(t=>t.id===e.parentId);(t||n)&&a.push(e)}let u=new Set(n.map(e=>e.id)),s=r.filter(e=>!1!==e.deletable),c=((e,t)=>{let n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))})(a,s);for(let e of s)u.has(e.id)&&!c.find(t=>t.id===e.id)&&c.push(e);if(!i)return{edges:c,nodes:a};let d=await i({nodes:a,edges:c});return"boolean"==typeof d?d?{edges:c,nodes:a}:{edges:[],nodes:[]}:d}let nr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},ni=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return{x:nr(n.x,o[0][0],o[1][0]-(null!=(e=null==r?void 0:r.width)?e:0)),y:nr(n.y,o[0][1],o[1][1]-(null!=(t=null==r?void 0:r.height)?t:0))}};function nl(e,t,n){let{width:o,height:r}=nC(n),{x:i,y:l}=n.internals.positionAbsolute;return ni(e,[[i,l],[i+o,l+r]],t)}let na=(e,t,n)=>e<t?nr(Math.abs(e-t),1,t)/t:e>n?-nr(Math.abs(e-n),1,t)/t:0,nu=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;return[na(e.x,o,t.width-o)*n,na(e.y,o,t.height-o)*n]},ns=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),nc=e=>{let{x:t,y:n,width:o,height:r}=e;return{x:t,y:n,x2:t+o,y2:n+r}},nd=e=>{let{x:t,y:n,x2:o,y2:r}=e;return{x:t,y:n,width:o-t,height:r-n}},nf=function(e){var t,n,o,r,i,l,a,u;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],{x:c,y:d}=t8(e)?e.internals.positionAbsolute:t6(e,s);return{x:c,y:d,width:null!=(i=null!=(r=null!=(o=null==(t=e.measured)?void 0:t.width)?o:e.width)?r:e.initialWidth)?i:0,height:null!=(u=null!=(a=null!=(l=null==(n=e.measured)?void 0:n.height)?l:e.height)?a:e.initialHeight)?u:0}},nh=function(e){var t,n,o,r,i,l,a,u;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],{x:c,y:d}=t8(e)?e.internals.positionAbsolute:t6(e,s);return{x:c,y:d,x2:c+(null!=(i=null!=(r=null!=(o=null==(t=e.measured)?void 0:t.width)?o:e.width)?r:e.initialWidth)?i:0),y2:d+(null!=(u=null!=(a=null!=(l=null==(n=e.measured)?void 0:n.height)?l:e.height)?a:e.initialHeight)?u:0)}},np=(e,t)=>nd(ns(nc(e),nc(t))),ng=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),nm=e=>nv(e.width)&&nv(e.height)&&nv(e.x)&&nv(e.y),nv=e=>!isNaN(e)&&isFinite(e),ny=(e,t)=>{},nx=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}},nw=function(e,t){let{x:n,y:o}=e,[r,i,l]=t,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],s={x:(n-r)/l,y:(o-i)/l};return a?nx(s,u):s},nb=(e,t)=>{let{x:n,y:o}=e,[r,i,l]=t;return{x:n*l+r,y:o*l+i}};function n_(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}let nS=(e,t,n,o,r,i)=>{let l=function(e,t,n){if("string"==typeof e||"number"==typeof e){let o=n_(e,n),r=n_(e,t);return{top:o,right:r,bottom:o,left:r,x:2*r,y:2*o}}if("object"==typeof e){var o,r,i,l,a,u,s,c;let d=n_(null!=(r=null!=(o=e.top)?o:e.y)?r:0,n),f=n_(null!=(l=null!=(i=e.bottom)?i:e.y)?l:0,n),h=n_(null!=(u=null!=(a=e.left)?a:e.x)?u:0,t),p=n_(null!=(c=null!=(s=e.right)?s:e.x)?c:0,t);return{top:d,right:p,bottom:f,left:h,x:h+p,y:d+f}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),a=nr(Math.min((t-l.x)/e.width,(n-l.y)/e.height),o,r),u=e.x+e.width/2,s=e.y+e.height/2,c=t/2-u*a,d=n/2-s*a,f=function(e,t,n,o,r,i){let{x:l,y:a}=nb(e,[t,n,o]),{x:u,y:s}=nb({x:e.x+e.width,y:e.y+e.height},[t,n,o]);return{left:Math.floor(l),top:Math.floor(a),right:Math.floor(r-u),bottom:Math.floor(i-s)}}(e,c,d,a,t,n),h={left:Math.min(f.left-l.left,0),top:Math.min(f.top-l.top,0),right:Math.min(f.right-l.right,0),bottom:Math.min(f.bottom-l.bottom,0)};return{x:c-h.left+h.right,y:d-h.top+h.bottom,zoom:a}},nE=()=>{var e,t;return"undefined"!=typeof navigator&&(null==(t=navigator)||null==(e=t.userAgent)?void 0:e.indexOf("Mac"))>=0};function nM(e){return null!=e&&"parent"!==e}function nC(e){var t,n,o,r,i,l,a,u;return{width:null!=(i=null!=(r=null!=(o=null==(t=e.measured)?void 0:t.width)?o:e.width)?r:e.initialWidth)?i:0,height:null!=(u=null!=(a=null!=(l=null==(n=e.measured)?void 0:n.height)?l:e.height)?a:e.initialHeight)?u:0}}function nk(e){var t,n,o,r,i,l;return(null!=(r=null!=(o=null==(t=e.measured)?void 0:t.width)?o:e.width)?r:e.initialWidth)!==void 0&&(null!=(l=null!=(i=null==(n=e.measured)?void 0:n.height)?i:e.height)?l:e.initialHeight)!==void 0}function nN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i={...e},l=o.get(n);if(l){var a,u;let e=l.origin||r;i.x+=l.internals.positionAbsolute.x-(null!=(a=t.width)?a:0)*e[0],i.y+=l.internals.positionAbsolute.y-(null!=(u=t.height)?u:0)*e[1]}return i}function nP(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function nA(e,t){var n,o;let{snapGrid:r=[0,0],snapToGrid:i=!1,transform:l,containerBounds:a}=t,{x:u,y:s}=nR(e),c=nw({x:u-(null!=(n=null==a?void 0:a.left)?n:0),y:s-(null!=(o=null==a?void 0:a.top)?o:0)},l),{x:d,y:f}=i?nx(c,r):c;return{xSnapped:d,ySnapped:f,...c}}let nj=e=>({width:e.offsetWidth,height:e.offsetHeight}),nz=e=>{var t,n;return(null==e||null==(t=e.getRootNode)?void 0:t.call(e))||(null==(n=window)?void 0:n.document)},nO=["INPUT","SELECT","TEXTAREA"];function nI(e){var t,n;let o=(null==(n=e.composedPath)||null==(t=n.call(e))?void 0:t[0])||e.target;return(null==o?void 0:o.nodeType)===1&&(nO.includes(o.nodeName)||o.hasAttribute("contenteditable")||!!o.closest(".nokey"))}let nR=(e,t)=>{var n,o,r,i;let l="clientX"in e,a=l?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,u=l?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:a-(null!=(r=null==t?void 0:t.left)?r:0),y:u-(null!=(i=null==t?void 0:t.top)?i:0)}},nD=(e,t,n,o,r)=>{let i=t.querySelectorAll(".".concat(e));return i&&i.length?Array.from(i).map(t=>{let i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...nj(t)}}):null};function nL(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r,sourceControlX:i,sourceControlY:l,targetControlX:a,targetControlY:u}=e,s=.125*t+.375*i+.375*a+.125*o,c=.125*n+.375*l+.375*u+.125*r,d=Math.abs(s-t),f=Math.abs(c-n);return[s,c,d,f]}function nB(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nT(e){let{pos:t,x1:n,y1:o,x2:r,y2:i,c:l}=e;switch(t){case a.Left:return[n-nB(n-r,l),o];case a.Right:return[n+nB(r-n,l),o];case a.Top:return[n,o-nB(o-i,l)];case a.Bottom:return[n,o+nB(i-o,l)]}}function nH(e){let{sourceX:t,sourceY:n,sourcePosition:o=a.Bottom,targetX:r,targetY:i,targetPosition:l=a.Top,curvature:u=.25}=e,[s,c]=nT({pos:o,x1:t,y1:n,x2:r,y2:i,c:u}),[d,f]=nT({pos:l,x1:r,y1:i,x2:t,y2:n,c:u}),[h,p,g,m]=nL({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:d,targetControlY:f});return["M".concat(t,",").concat(n," C").concat(s,",").concat(c," ").concat(d,",").concat(f," ").concat(r,",").concat(i),h,p,g,m]}function nV(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,i=Math.abs(o-t)/2,l=Math.abs(r-n)/2;return[o<t?o+i:o-i,r<n?r+l:r-l,i,l]}function nF(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,l,a,u]=nV({sourceX:t,sourceY:n,targetX:o,targetY:r});return["M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r),i,l,a,u]}let nX={[a.Left]:{x:-1,y:0},[a.Right]:{x:1,y:0},[a.Top]:{x:0,y:-1},[a.Bottom]:{x:0,y:1}},nY=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nZ(e){let{sourceX:t,sourceY:n,sourcePosition:o=a.Bottom,targetX:r,targetY:i,targetPosition:l=a.Top,borderRadius:u=5,centerX:s,centerY:c,offset:d=20,stepPosition:f=.5}=e,[h,p,g,m,v]=function(e){let t,n,{source:o,sourcePosition:r=a.Bottom,target:i,targetPosition:l=a.Top,center:u,offset:s,stepPosition:c}=e,d=nX[r],f=nX[l],h={x:o.x+d.x*s,y:o.y+d.y*s},p={x:i.x+f.x*s,y:i.y+f.y*s},g=(e=>{let{source:t,sourcePosition:n=a.Bottom,target:o}=e;return n===a.Left||n===a.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1}})({source:h,sourcePosition:r,target:p}),m=0!==g.x?"x":"y",v=g[m],y=[],x={x:0,y:0},w={x:0,y:0},[,,b,_]=nV({sourceX:o.x,sourceY:o.y,targetX:i.x,targetY:i.y});if(d[m]*f[m]==-1){var S,E,M,C;"x"===m?(t=null!=(S=u.x)?S:h.x+(p.x-h.x)*c,n=null!=(E=u.y)?E:(h.y+p.y)/2):(t=null!=(M=u.x)?M:(h.x+p.x)/2,n=null!=(C=u.y)?C:h.y+(p.y-h.y)*c);let e=[{x:t,y:h.y},{x:t,y:p.y}],o=[{x:h.x,y:n},{x:p.x,y:n}];y=d[m]===v?"x"===m?e:o:"x"===m?o:e}else{let e=[{x:h.x,y:p.y}],a=[{x:p.x,y:h.y}];if(y="x"===m?d.x===v?a:e:d.y===v?e:a,r===l){let e=Math.abs(o[m]-i[m]);if(e<=s){let t=Math.min(s-1,s-e);d[m]===v?x[m]=(h[m]>o[m]?-1:1)*t:w[m]=(p[m]>i[m]?-1:1)*t}}if(r!==l){let t="x"===m?"y":"x",n=d[m]===f[t],o=h[t]>p[t],r=h[t]<p[t];(1===d[m]&&(!n&&o||n&&r)||1!==d[m]&&(!n&&r||n&&o))&&(y="x"===m?e:a)}let u={x:h.x+x.x,y:h.y+x.y},c={x:p.x+w.x,y:p.y+w.y};Math.max(Math.abs(u.x-y[0].x),Math.abs(c.x-y[0].x))>=Math.max(Math.abs(u.y-y[0].y),Math.abs(c.y-y[0].y))?(t=(u.x+c.x)/2,n=y[0].y):(t=y[0].x,n=(u.y+c.y)/2)}return[[o,{x:h.x+x.x,y:h.y+x.y},...y,{x:p.x+w.x,y:p.y+w.y},i],t,n,b,_]}({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:l,center:{x:s,y:c},offset:d,stepPosition:f});return[h.reduce((e,t,n)=>e+(n>0&&n<h.length-1?function(e,t,n,o){let r=Math.min(nY(e,t)/2,nY(t,n)/2,o),{x:i,y:l}=t;if(e.x===i&&i===n.x||e.y===l&&l===n.y)return"L".concat(i," ").concat(l);if(e.y===l){let t=e.x<n.x?-1:1,o=e.y<n.y?1:-1;return"L ".concat(i+r*t,",").concat(l,"Q ").concat(i,",").concat(l," ").concat(i,",").concat(l+r*o)}let a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return"L ".concat(i,",").concat(l+r*u,"Q ").concat(i,",").concat(l," ").concat(i+r*a,",").concat(l)}(h[n-1],t,h[n+1],u):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y)),""),p,g,m,v]}function nq(e){var t;return e&&!!(e.internals.handleBounds||(null==(t=e.handles)?void 0:t.length))&&!!(e.measured.width||e.width||e.initialWidth)}function nW(e){if(!e)return null;let t=[],n=[];for(let i of e){var o,r;i.width=null!=(o=i.width)?o:1,i.height=null!=(r=i.height)?r:1,"source"===i.type?t.push(i):"target"===i.type&&n.push(i)}return{source:t,target:n}}function nK(e,t){var n,o,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Left,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(null!=(n=null==t?void 0:t.x)?n:0)+e.internals.positionAbsolute.x,s=(null!=(o=null==t?void 0:t.y)?o:0)+e.internals.positionAbsolute.y,{width:c,height:d}=null!=t?t:nC(e);if(l)return{x:u+c/2,y:s+d/2};switch(null!=(r=null==t?void 0:t.position)?r:i){case a.Top:return{x:u+c/2,y:s};case a.Right:return{x:u+c,y:s+d/2};case a.Bottom:return{x:u+c/2,y:s+d};case a.Left:return{x:u,y:s+d/2}}}function nU(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function nG(e,t){return e?"string"==typeof e?e:"".concat(t?"".concat(t,"__"):"").concat(Object.keys(e).sort().map(t=>"".concat(t,"=").concat(e[t])).join("&")):""}let nQ={nodeOrigin:[0,0],nodeExtent:tJ,elevateNodesOnSelect:!0,defaults:{}},n$={...nQ,checkEquality:!0};function nJ(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function n0(e,t,n,o){let r=nJ(n$,o),i=e.length>0,l=new Map(t),a=1e3*(null!=r&&!!r.elevateNodesOnSelect);for(let c of(t.clear(),n.clear(),e)){let e=l.get(c.id);if(r.checkEquality&&c===(null==e?void 0:e.internals.userNode))t.set(c.id,e);else{var u,s;let n=ni(t6(c,r.nodeOrigin),nM(c.extent)?c.extent:r.nodeExtent,nC(c));e={...r.defaults,...c,measured:{width:null==(u=c.measured)?void 0:u.width,height:null==(s=c.measured)?void 0:s.height},internals:{positionAbsolute:n,handleBounds:function(e,t){if(!e.handles)return e.measured?null==t?void 0:t.internals.handleBounds:void 0;let n=[],o=[];for(let t of e.handles){var r,i;let l={id:t.id,width:null!=(r=t.width)?r:1,height:null!=(i=t.height)?i:1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(l):"target"===t.type&&o.push(l)}return{source:n,target:o}}(c,e),z:n2(c,a),userNode:c}},t.set(c.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),c.parentId&&n1(e,t,n,o)}return i}function n1(e,t,n,o){let{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:l}=nJ(nQ,o),a=e.parentId,u=t.get(a);if(!u)return void console.warn("Parent node ".concat(a," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);let{x:s,y:c,z:d}=function(e,t,n,o,r){var i;let{x:l,y:a}=t.internals.positionAbsolute,u=nC(e),s=t6(e,n),c=nM(e.extent)?ni(s,e.extent,u):s,d=ni({x:l+c.x,y:a+c.y},o,u);"parent"===e.extent&&(d=nl(d,u,t));let f=n2(e,r),h=null!=(i=t.internals.z)?i:0;return{x:d.x,y:d.y,z:h>=f?h+1:f}}(e,u,i,l,1e3*!!r),{positionAbsolute:f}=e.internals,h=s!==f.x||c!==f.y;(h||d!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:h?{x:s,y:c}:f,z:d}})}function n2(e,t){return(nv(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function n5(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],r=[],i=new Map;for(let n of e){var l,a;let e=t.get(n.parentId);if(!e)continue;let o=np(null!=(a=null==(l=i.get(n.parentId))?void 0:l.expandedRect)?a:nf(e),n.rect);i.set(n.parentId,{expandedRect:o,parent:e})}return i.size>0&&i.forEach((t,i)=>{var l,a;let{expandedRect:u,parent:s}=t,c=s.internals.positionAbsolute,d=nC(s),f=null!=(l=s.origin)?l:o,h=u.x<c.x?Math.round(Math.abs(c.x-u.x)):0,p=u.y<c.y?Math.round(Math.abs(c.y-u.y)):0,g=Math.max(d.width,Math.round(u.width)),m=Math.max(d.height,Math.round(u.height)),v=(g-d.width)*f[0],y=(m-d.height)*f[1];(h>0||p>0||v||y)&&(r.push({id:i,type:"position",position:{x:s.position.x-h+v,y:s.position.y-p+y}}),null==(a=n.get(i))||a.forEach(t=>{e.some(e=>e.id===t.id)||r.push({id:t.id,type:"position",position:{x:t.position.x+h,y:t.position.y+p}})})),(d.width<u.width||d.height<u.height||h||p)&&r.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:g+(h?f[0]*h-v:0),height:m+(p?f[1]*p-y:0)}})}),r}async function n3(e){let{delta:t,panZoom:n,transform:o,translateExtent:r,width:i,height:l}=e;if(!n||!t.x&&!t.y)return Promise.resolve(!1);let a=await n.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[i,l]],r);return Promise.resolve(!!a&&(a.x!==o[0]||a.y!==o[1]||a.k!==o[2]))}function n4(e,t,n,o,r,i){let l=r,a=o.get(l)||new Map;o.set(l,a.set(n,t)),l="".concat(r,"-").concat(e);let u=o.get(l)||new Map;if(o.set(l,u.set(n,t)),i){l="".concat(r,"-").concat(e,"-").concat(i);let a=o.get(l)||new Map;o.set(l,a.set(n,t))}}function n8(e,t,n){for(let o of(e.clear(),t.clear(),n)){let{source:n,target:r,sourceHandle:i=null,targetHandle:l=null}=o,a={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:l},u="".concat(n,"-").concat(i,"--").concat(r,"-").concat(l);n4("source",a,"".concat(r,"-").concat(l,"--").concat(n,"-").concat(i),e,n,i),n4("target",a,u,e,r,l),t.set(o.id,o)}}function n6(e,t,n){let o=e;do{var r;if(null==o||null==(r=o.matches)?void 0:r.call(o,t))return!0;if(o===n)break;o=null==o?void 0:o.parentElement}while(o)return!1}function n9(e){var t,n,o;let{nodeId:r,dragItems:i,nodeLookup:l,dragging:a=!0}=e,u=[];for(let[e,t]of i){let n=null==(o=l.get(e))?void 0:o.internals.userNode;n&&u.push({...n,position:t.position,dragging:a})}if(!r)return[u[0],u];let s=null==(t=l.get(r))?void 0:t.internals.userNode;return[s?{...s,position:(null==(n=i.get(r))?void 0:n.position)||s.position,dragging:a}:u[0],u]}function n7(e,t,n,o,r){var i,l,a,u,s,c;let d=arguments.length>5&&void 0!==arguments[5]&&arguments[5],f=o.get(e);if(!f)return null;let h="strict"===r?null==(i=f.internals.handleBounds)?void 0:i[t]:[...null!=(u=null==(l=f.internals.handleBounds)?void 0:l.source)?u:[],...null!=(s=null==(a=f.internals.handleBounds)?void 0:a.target)?s:[]],p=null!=(c=n?null==h?void 0:h.find(e=>e.id===n):null==h?void 0:h[0])?c:null;return p&&d?{...p,...nK(f,p,p.position,!0)}:p}function oe(e,t){return e?e:(null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null}let ot=()=>!0;function on(e,t){let{handle:o,connectionMode:r,fromNodeId:i,fromHandleId:l,fromType:a,doc:u,lib:s,flowId:c,isValidConnection:d=ot,nodeLookup:f}=t,h="target"===a,p=o?u.querySelector(".".concat(s,'-flow__handle[data-id="').concat(c,"-").concat(null==o?void 0:o.nodeId,"-").concat(null==o?void 0:o.id,"-").concat(null==o?void 0:o.type,'"]')):null,{x:g,y:m}=nR(e),v=u.elementFromPoint(g,m),y=(null==v?void 0:v.classList.contains("".concat(s,"-flow__handle")))?v:p,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){let e=oe(void 0,y),t=y.getAttribute("data-nodeid"),o=y.getAttribute("data-handleid"),a=y.classList.contains("connectable"),u=y.classList.contains("connectableend");if(!t||!e)return x;let s={source:h?t:i,sourceHandle:h?o:l,target:h?i:t,targetHandle:h?l:o};x.connection=s,x.isValid=a&&u&&(r===n.Strict?h&&"source"===e||!h&&"target"===e:t!==i||o!==l)&&d(s),x.toHandle=n7(t,e,o,f,r,!0)}return x}let oo={onPointerDown:function(e,t){let n,{connectionMode:o,connectionRadius:r,handleId:i,nodeId:l,edgeUpdaterType:u,isTarget:s,domNode:c,nodeLookup:d,lib:f,autoPanOnConnect:h,flowId:p,panBy:g,cancelConnection:m,onConnectStart:v,onConnect:y,onConnectEnd:x,isValidConnection:w=ot,onReconnectEnd:b,updateConnection:_,getTransform:S,getFromHandle:E,autoPanSpeed:M,dragThreshold:C=1,handleDomNode:k}=t,N=nz(e.target),P=0,{x:A,y:j}=nR(e),z=oe(u,k),O=null==c?void 0:c.getBoundingClientRect(),I=!1;if(!O||!z)return;let R=n7(l,z,i,d,o);if(!R)return;let D=nR(e,O),L=!1,B=null,T=!1,H=null,V={...R,nodeId:l,type:z,position:R.position},F=d.get(l),X={inProgress:!0,isValid:null,from:nK(F,V,a.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:F,to:D,toHandle:null,toPosition:t5[V.position],toNode:null};function Y(){I=!0,_(X),null==v||v(e,{nodeId:l,handleId:i,handleType:z})}function Z(e){var t,a;let u;if(!I){let{x:t,y:n}=nR(e),o=t-A,r=n-j;if(!(o*o+r*r>C*C))return;Y()}if(!E()||!V)return void q(e);let c=S();n=function(e,t,n,o){var r,i,l,a,u;let s=[],c=1/0;for(let u of function(e,t,n){let o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())ng(r,nf(e))>0&&o.push(e);return o}(e,n,t+250))for(let n of[...null!=(l=null==(r=u.internals.handleBounds)?void 0:r.source)?l:[],...null!=(a=null==(i=u.internals.handleBounds)?void 0:i.target)?a:[]]){if(o.nodeId===n.nodeId&&o.type===n.type&&o.id===n.id)continue;let{x:r,y:i}=nK(u,n,n.position,!0),l=Math.sqrt(Math.pow(r-e.x,2)+Math.pow(i-e.y,2));l>t||(l<c?(s=[{...n,x:r,y:i}],c=l):l===c&&s.push({...n,x:r,y:i}))}if(!s.length)return null;if(s.length>1){let e="source"===o.type?"target":"source";return null!=(u=s.find(t=>t.type===e))?u:s[0]}return s[0]}(nw(D=nR(e,O),c,!1,[1,1]),r,d,V),L||(!function e(){if(!h||!O)return;let[t,n]=nu(D,O,M);g({x:t,y:n}),P=requestAnimationFrame(e)}(),L=!0);let m=on(e,{handle:n,connectionMode:o,fromNodeId:l,fromHandleId:i,fromType:s?"target":"source",isValidConnection:w,doc:N,lib:f,flowId:p,nodeLookup:d});H=m.handleDomNode,B=m.connection,t=!!n,a=m.isValid,u=null,a?u=!0:t&&!a&&(u=!1),T=u;let v={...X,isValid:T,to:m.toHandle&&T?nb({x:m.toHandle.x,y:m.toHandle.y},c):D,toHandle:m.toHandle,toPosition:T&&m.toHandle?m.toHandle.position:t5[V.position],toNode:m.toHandle?d.get(m.toHandle.nodeId):null};T&&n&&X.toHandle&&v.toHandle&&X.toHandle.type===v.toHandle.type&&X.toHandle.nodeId===v.toHandle.nodeId&&X.toHandle.id===v.toHandle.id&&X.to.x===v.to.x&&X.to.y===v.to.y||(_(v),X=v)}function q(e){if(!("touches"in e)||!(e.touches.length>0)){if(I){(n||H)&&B&&T&&(null==y||y(B));let{inProgress:t,...o}=X,r={...o,toPosition:X.toHandle?X.toPosition:null};null==x||x(e,r),u&&(null==b||b(e,r))}m(),cancelAnimationFrame(P),L=!1,T=!1,B=null,H=null,N.removeEventListener("mousemove",Z),N.removeEventListener("mouseup",q),N.removeEventListener("touchmove",Z),N.removeEventListener("touchend",q)}}0===C&&Y(),N.addEventListener("mousemove",Z),N.addEventListener("mouseup",q),N.addEventListener("touchmove",Z),N.addEventListener("touchend",q)},isValid:on},or=e=>({x:e.x,y:e.y,zoom:e.k}),oi=e=>{let{x:t,y:n,zoom:o}=e;return tH.translate(t,n).scale(o)},ol=(e,t)=>e.target.closest(".".concat(t)),oa=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),ou=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,os=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ou,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{},r="number"==typeof t&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},oc=e=>{let t=e.ctrlKey&&nE()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function od(e,t){return Math.max(0,t-e)}function of(e,t){return Math.max(0,e-t)}function oh(e,t,n){return Math.max(0,t-e,e-n)}!function(e){e.Line="line",e.Handle="handle"}(u||(u={}));let op={width:0,height:0,x:0,y:0},og={...op,pointerX:0,pointerY:0,aspectRatio:1};var om=e.i(30224);let ov={get url(){return`file://${e.P("node_modules/zustand/esm/vanilla.mjs")}`}},oy=e=>{let t,n=new Set,o=(e,o)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=o?o:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>l,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(ov.env?ov.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(o,r,i);return i},{useDebugValue:ox}=d.default,{useSyncExternalStoreWithSelector:ow}=om.default,ob=e=>e;function o_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ob,n=arguments.length>2?arguments[2]:void 0,o=ow(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ox(o),o}let oS=(e,t)=>{let n=(e=>e?oy(e):oy)(e),o=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return o_(n,e,o)};return Object.assign(o,n),o};function oE(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}e.i(74080);let oM=(0,d.createContext)(null),oC=oM.Provider,ok=t$.error001();function oN(e,t){let n=(0,d.useContext)(oM);if(null===n)throw Error(ok);return o_(n,e,t)}function oP(){let e=(0,d.useContext)(oM);if(null===e)throw Error(ok);return(0,d.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let oA={display:"none"},oj={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oz="react-flow__node-desc",oO="react-flow__edge-desc",oI=e=>e.ariaLiveMessage,oR=e=>e.ariaLabelConfig;function oD(e){let{rfId:t}=e,n=oN(oI);return(0,c.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:oj,children:n})}function oL(e){let{rfId:t,disableKeyboardA11y:n}=e,o=oN(oR);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{id:"".concat(oz,"-").concat(t),style:oA,children:n?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),(0,c.jsx)("div",{id:"".concat(oO,"-").concat(t),style:oA,children:o["edge.a11yDescription.default"]}),!n&&(0,c.jsx)(oD,{rfId:t})]})}let oB=(0,d.forwardRef)((e,t)=>{let{position:n="top-left",children:o,className:r,style:i,...l}=e,a="".concat(n).split("-");return(0,c.jsx)("div",{className:f(["react-flow__panel",r,...a]),style:i,ref:t,...l,children:o})});function oT(e){let{proOptions:t,position:n="bottom-right"}=e;return(null==t?void 0:t.hideAttribution)?null:(0,c.jsx)(oB,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,c.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}oB.displayName="Panel";let oH=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},oV=e=>e.id;function oF(e,t){return oE(e.selectedNodes.map(oV),t.selectedNodes.map(oV))&&oE(e.selectedEdges.map(oV),t.selectedEdges.map(oV))}function oX(e){let{onSelectionChange:t}=e,n=oP(),{selectedNodes:o,selectedEdges:r}=oN(oH,oF);return(0,d.useEffect)(()=>{let e={nodes:o,edges:r};null==t||t(e),n.getState().onSelectionChangeHandlers.forEach(t=>t(e))},[o,r,t]),null}let oY=e=>!!e.onSelectionChangeHandlers;function oZ(e){let{onSelectionChange:t}=e,n=oN(oY);return t||n?(0,c.jsx)(oX,{onSelectionChange:t}):null}let oq=[0,0],oW={x:0,y:0,zoom:1},oK=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],oU=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),oG={translateExtent:tJ,nodeOrigin:oq,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function oQ(e){let{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:l,reset:a,setDefaultNodesAndEdges:u,setPaneClickDistance:s}=oN(oU,oE),c=oP();(0,d.useEffect)(()=>(u(e.defaultNodes,e.defaultEdges),()=>{f.current=oG,a()}),[]);let f=(0,d.useRef)(oG);return(0,d.useEffect)(()=>{for(let a of oK){let u=e[a];if(u!==f.current[a]&&void 0!==e[a])if("nodes"===a)t(u);else if("edges"===a)n(u);else if("minZoom"===a)o(u);else if("maxZoom"===a)r(u);else if("translateExtent"===a)i(u);else if("nodeExtent"===a)l(u);else if("paneClickDistance"===a)s(u);else if("ariaLabelConfig"===a)c.setState({ariaLabelConfig:{...t1,...u||{}}});else"fitView"===a?c.setState({fitViewQueued:u}):"fitViewOptions"===a?c.setState({fitViewOptions:u}):c.setState({[a]:u})}f.current=e},oK.map(t=>e[t])),null}function o$(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}let oJ="undefined"!=typeof document?document:null;function o0(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:oJ,actInsideInputWithModifier:!0},[n,o]=(0,d.useState)(!1),r=(0,d.useRef)(!1),i=(0,d.useRef)(new Set([])),[l,a]=(0,d.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,d.useEffect)(()=>{var n,u;let s=null!=(n=null==t?void 0:t.target)?n:oJ,c=null==(u=null==t?void 0:t.actInsideInputWithModifier)||u;if(null!==e){let e=e=>{if(r.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!r.current||r.current&&!c)&&nI(e))return!1;let n=o2(e.code,a);if(i.current.add(e[n]),o1(l,i.current,!1)){var u,s;let n=(null==(s=e.composedPath)||null==(u=s.call(e))?void 0:u[0])||e.target,i=(null==n?void 0:n.nodeName)==="BUTTON"||(null==n?void 0:n.nodeName)==="A";!1!==t.preventDefault&&(r.current||!i)&&e.preventDefault(),o(!0)}},n=e=>{let t=o2(e.code,a);o1(l,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(e[t]),"Meta"===e.key&&i.current.clear(),r.current=!1},u=()=>{i.current.clear(),o(!1)};return null==s||s.addEventListener("keydown",e),null==s||s.addEventListener("keyup",n),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{null==s||s.removeEventListener("keydown",e),null==s||s.removeEventListener("keyup",n),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,o]),n}function o1(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function o2(e,t){return t.includes(e)?"code":"key"}function o5(e,t){let n=[],o=new Map,r=[];for(let t of e)if("add"===t.type){r.push(t);continue}else if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{let e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}for(let e of t){let t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let r={...e};for(let e of t)!function(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(null!=t.measured||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((!0===e.setAttributes||"width"===e.setAttributes)&&(t.width=e.dimensions.width),(!0===e.setAttributes||"height"===e.setAttributes)&&(t.height=e.dimensions.height)));"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}(e,r);n.push(r)}return r.length&&r.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function o3(e,t){return{id:e,type:"select",selected:t}}function o4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];for(let[r,i]of e){let e=t.has(r);(void 0!==i.selected||e)&&i.selected!==e&&(n&&(i.selected=e),o.push(o3(i.id,e)))}return o}function o8(e){let{items:t=[],lookup:n}=e,o=[],r=new Map(t.map(e=>[e.id,e]));for(let[e,r]of t.entries()){var i,l;let t=n.get(r.id),a=null!=(l=null==t||null==(i=t.internals)?void 0:i.userNode)?l:t;void 0!==a&&a!==r&&o.push({id:r.id,item:r,type:"replace"}),void 0===a&&o.push({item:r,type:"add",index:e})}for(let[e]of n)void 0===r.get(e)&&o.push({id:e,type:"remove"});return o}function o6(e){return{id:e.id,type:"remove"}}let o9=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function o7(e){return(0,d.forwardRef)(e)}let re="undefined"!=typeof window?d.useLayoutEffect:d.useEffect;function rt(e){let[t,n]=(0,d.useState)(BigInt(0)),[o]=(0,d.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return re(()=>{let t=o.get();t.length&&(e(t),o.reset())},[t]),o}let rn=(0,d.createContext)(null);function ro(e){let{children:t}=e,n=oP(),o=rt((0,d.useCallback)(e=>{let{nodes:t=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:l,fitViewQueued:a}=n.getState(),u=t;for(let t of e)u="function"==typeof t?t(u):t;let s=o8({items:u,lookup:l});r&&o(u),s.length>0?null==i||i(s):a&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:t,setNodes:o}=n.getState();e&&o(t)})},[])),r=rt((0,d.useCallback)(e=>{let{edges:t=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:l}=n.getState(),a=t;for(let t of e)a="function"==typeof t?t(a):t;r?o(a):i&&i(o8({items:a,lookup:l}))},[])),i=(0,d.useMemo)(()=>({nodeQueue:o,edgeQueue:r}),[]);return(0,c.jsx)(rn.Provider,{value:i,children:t})}let rr=e=>!!e.panZoom;function ri(){let e=(()=>{let e=oP();return(0,d.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:null==n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var o,r,i;let{transform:[l,a,u],panZoom:s}=e.getState();return s?(await s.setViewport({x:null!=(o=t.x)?o:l,y:null!=(r=t.y)?r:a,zoom:null!=(i=t.zoom)?i:u},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{var o;let{width:r,height:i,minZoom:l,maxZoom:a,panZoom:u}=e.getState(),s=nS(t,r,i,l,a,null!=(o=null==n?void 0:n.padding)?o:.1);return u?(await u.setViewport(s,{duration:null==n?void 0:n.duration,ease:null==n?void 0:n.ease,interpolate:null==n?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){var n,o;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{transform:i,snapGrid:l,snapToGrid:a,domNode:u}=e.getState();if(!u)return t;let{x:s,y:c}=u.getBoundingClientRect(),d={x:t.x-s,y:t.y-c},f=null!=(n=r.snapGrid)?n:l;return nw(d,i,null!=(o=r.snapToGrid)?o:a,f)},flowToScreenPosition:t=>{let{transform:n,domNode:o}=e.getState();if(!o)return t;let{x:r,y:i}=o.getBoundingClientRect(),l=nb(t,n);return{x:l.x+r,y:l.y+i}}}),[])})(),t=oP(),n=function(){let e=(0,d.useContext)(rn);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),o=oN(rr),r=(0,d.useMemo)(()=>{let e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},i=e=>{var n,o,r,i;let{nodeLookup:l,nodeOrigin:a}=t.getState(),u=o9(e)?e:l.get(e.id),s=u.parentId?nN(u.position,u.measured,u.parentId,l,a):u.position;return nf({...u,position:s,width:null!=(r=null==(n=u.measured)?void 0:n.width)?r:u.width,height:null!=(i=null==(o=u.measured)?void 0:o.height)?i:u.height})},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};o(o=>o.map(o=>{if(o.id===e){let e="function"==typeof t?t(o):t;return n.replace&&o9(e)?e:{...o,...e}}return o}))},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};r(o=>o.map(o=>{if(o.id===e){let e="function"==typeof t?t(o):t;return n.replace&&t4(e)?e:{...o,...e}}return o}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>{var n;return null==(n=e(t))?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{let t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,i,l]=o;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:r,y:i,zoom:l}}},deleteElements:async e=>{let{nodes:n=[],edges:o=[]}=e,{nodes:r,edges:i,onNodesDelete:l,onEdgesDelete:a,triggerNodeChanges:u,triggerEdgeChanges:s,onDelete:c,onBeforeDelete:d}=t.getState(),{nodes:f,edges:h}=await no({nodesToRemove:n,edgesToRemove:o,nodes:r,edges:i,onBeforeDelete:d}),p=h.length>0,g=f.length>0;if(p){let e=h.map(o6);null==a||a(h),s(e)}if(g){let e=f.map(o6);null==l||l(f),u(e)}return(g||p)&&(null==c||c({nodes:f,edges:h})),{deletedNodes:f,deletedEdges:h}},getIntersectingNodes:function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,r=nm(e),l=r?e:i(e),a=void 0!==o;return l?(o||t.getState().nodes).filter(o=>{let i=t.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;let u=nf(a?o:i),s=ng(u,l);return n&&s>0||s>=u.width*u.height||s>=l.width*l.height}):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=nm(e)?e:i(e);if(!o)return!1;let r=ng(o,t);return n&&r>0||r>=t.width*t.height||r>=o.width*o.height},updateNode:l,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};l(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},updateEdge:a,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},getNodesBounds:e=>{let{nodeLookup:n,nodeOrigin:o}=t.getState();return t9(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:e=>{var n,o;let{type:r,id:i,nodeId:l}=e;return Array.from(null!=(o=null==(n=t.getState().connectionLookup.get("".concat(l,"-").concat(r).concat(i?"-".concat(i):"")))?void 0:n.values())?o:[])},getNodeConnections:e=>{var n,o;let{type:r,handleId:i,nodeId:l}=e;return Array.from(null!=(o=null==(n=t.getState().connectionLookup.get("".concat(l).concat(r?i?"-".concat(r,"-").concat(i):"-".concat(r):"")))?void 0:n.values())?o:[])},fitView:async e=>{var o;let r,i,l=null!=(o=t.getState().fitViewResolver)?o:{promise:new Promise((e,t)=>{r=e,i=t}),resolve:r,reject:i};return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:l}),n.nodeQueue.push(e=>[...e]),l.promise}}},[]);return(0,d.useMemo)(()=>({...r,...e,viewportInitialized:o}),[o])}let rl=e=>e.selected,ra="undefined"!=typeof window?window:void 0,ru={position:"absolute",width:"100%",height:"100%",top:0,left:0},rs=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function rc(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:a=o.Free,zoomOnDoubleClick:u=!0,panOnDrag:s=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:g,zoomActivationKeyCode:m,preventScrolling:v=!0,children:y,noWheelClassName:x,noPanClassName:w,onViewportChange:b,isControlledViewport:_,paneClickDistance:S}=e,E=oP(),M=(0,d.useRef)(null),{userSelectionActive:C,lib:k,connectionInProgress:N}=oN(rs,oE),P=o0(m),A=(0,d.useRef)(),j=oP();(0,d.useEffect)(()=>{let e=()=>{var e,t,n,o,r;if(!M.current||!(null==(n=null==(e=(t=M.current).checkVisibility)?void 0:e.call(t))||n))return!1;let i=nj(M.current);(0===i.height||0===i.width)&&(null==(o=(r=j.getState()).onError)||o.call(r,"004",t$.error004())),j.setState({width:i.width||500,height:i.height||500})};if(M.current){e(),window.addEventListener("resize",e);let t=new ResizeObserver(()=>e());return t.observe(M.current),()=>{window.removeEventListener("resize",e),t&&M.current&&t.unobserve(M.current)}}},[]);let z=(0,d.useCallback)(e=>{null==b||b({x:e[0],y:e[1],zoom:e[2]}),_||E.setState({transform:e})},[b,_]);return(0,d.useEffect)(()=>{if(M.current){A.current=function(e){let{domNode:t,minZoom:n,maxZoom:r,paneClickDistance:i,translateExtent:l,viewport:a,onPanZoom:u,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:d}=e,f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),p=tG().clickDistance(!nv(i)||i<0?0:i).scaleExtent([n,r]).translateExtent(l),g=er(t).call(p);w({x:a.x,y:a.y,zoom:nr(a.zoom,n,r)},[[0,0],[h.width,h.height]],l);let m=g.on("wheel.zoom"),v=g.on("dblclick.zoom");function y(e,t){return g?new Promise(n=>{null==p||p.interpolate((null==t?void 0:t.interpolate)==="linear"?tQ:ew).transform(os(g,null==t?void 0:t.duration,null==t?void 0:t.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function x(){p.on("zoom",null)}async function w(e,t,n){let o=oi(e),r=null==p?void 0:p.constrain()(o,t,n);return r&&await y(r),new Promise(e=>e(r))}return p.wheelDelta(oc),{update:function(e){let{noWheelClassName:t,noPanClassName:n,onPaneContextMenu:r,userSelectionActive:i,panOnScroll:l,panOnDrag:a,panOnScrollMode:h,panOnScrollSpeed:y,preventScrolling:w,zoomOnPinch:b,zoomOnScroll:_,zoomOnDoubleClick:S,zoomActivationKeyPressed:E,lib:M,onTransformChange:C,connectionInProgress:k}=e;i&&!f.isZoomingOrPanning&&x();let N=!l||E||i?function(e){let{noWheelClassName:t,preventScrolling:n,d3ZoomHandler:o}=e;return function(e,r){let i="wheel"===e.type,l=!n&&i&&!e.ctrlKey,a=ol(e,t);if(e.ctrlKey&&i&&a&&e.preventDefault(),l||a)return null;e.preventDefault(),o.call(this,e,r)}}({noWheelClassName:t,preventScrolling:w,d3ZoomHandler:m}):function(e){let{zoomPanValues:t,noWheelClassName:n,d3Selection:r,d3Zoom:i,panOnScrollMode:l,panOnScrollSpeed:a,zoomOnPinch:u,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:d}=e;return e=>{if(ol(e,n))return e.ctrlKey&&e.preventDefault(),!1;e.preventDefault(),e.stopImmediatePropagation();let f=r.property("__zoom").k||1;if(e.ctrlKey&&u){let t=ei(e),n=f*Math.pow(2,oc(e));i.scaleTo(r,n,t,e);return}let h=1===e.deltaMode?20:1,p=l===o.Vertical?0:e.deltaX*h,g=l===o.Horizontal?0:e.deltaY*h;!nE()&&e.shiftKey&&l!==o.Vertical&&(p=e.deltaY*h,g=0),i.translateBy(r,-(p/f)*a,-(g/f)*a,{internal:!0});let m=or(r.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,null==s||s(e,m)),t.isPanScrolling&&(null==c||c(e,m),t.panScrollTimeout=setTimeout(()=>{null==d||d(e,m),t.isPanScrolling=!1},150))}}({zoomPanValues:f,noWheelClassName:t,d3Selection:g,d3Zoom:p,panOnScrollMode:h,panOnScrollSpeed:y,zoomOnPinch:b,onPanZoomStart:s,onPanZoom:u,onPanZoomEnd:c});if(g.on("wheel.zoom",N,{passive:!1}),!i){let e=function(e){let{zoomPanValues:t,onDraggingChange:n,onPanZoomStart:o}=e;return e=>{var r,i,l;if(null==(r=e.sourceEvent)?void 0:r.internal)return;let a=or(e.transform);t.mouseButton=(null==(i=e.sourceEvent)?void 0:i.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=a,(null==(l=e.sourceEvent)?void 0:l.type)==="mousedown"&&n(!0),o&&(null==o||o(e.sourceEvent,a))}}({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:s});p.on("start",e);let t=function(e){let{zoomPanValues:t,panOnDrag:n,onPaneContextMenu:o,onTransformChange:r,onPanZoom:i}=e;return e=>{var l,a,u;t.usedRightMouseButton=!!(o&&oa(n,null!=(u=t.mouseButton)?u:0)),(null==(l=e.sourceEvent)?void 0:l.sync)||r([e.transform.x,e.transform.y,e.transform.k]),!i||(null==(a=e.sourceEvent)?void 0:a.internal)||null==i||i(e.sourceEvent,or(e.transform))}}({zoomPanValues:f,panOnDrag:a,onPaneContextMenu:!!r,onPanZoom:u,onTransformChange:C});p.on("zoom",t);let n=function(e){let{zoomPanValues:t,panOnDrag:n,panOnScroll:o,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:l}=e;return e=>{var a,u;if(null==(a=e.sourceEvent)||!a.internal){let a,s;if(t.isZoomingOrPanning=!1,l&&oa(n,null!=(u=t.mouseButton)?u:0)&&!t.usedRightMouseButton&&e.sourceEvent&&l(e.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&(a=t.prevViewport,s=e.transform,a.x!==s.x||a.y!==s.y||a.zoom!==s.k)){let n=or(e.transform);t.prevViewport=n,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{null==i||i(e.sourceEvent,n)},150*!!o)}}}}({zoomPanValues:f,panOnDrag:a,panOnScroll:l,onPaneContextMenu:r,onPanZoomEnd:c,onDraggingChange:d});p.on("end",n)}let P=function(e){let{zoomActivationKeyPressed:t,zoomOnScroll:n,zoomOnPinch:o,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:l,userSelectionActive:a,noWheelClassName:u,noPanClassName:s,lib:c,connectionInProgress:d}=e;return e=>{var f;let h=t||n,p=o&&e.ctrlKey,g="wheel"===e.type;if(1===e.button&&"mousedown"===e.type&&(ol(e,"".concat(c,"-flow__node"))||ol(e,"".concat(c,"-flow__edge"))))return!0;if(!r&&!h&&!i&&!l&&!o||a||d&&!g||ol(e,u)&&g||ol(e,s)&&(!g||i&&g&&!t)||!o&&e.ctrlKey&&g)return!1;if(!o&&"touchstart"===e.type&&(null==(f=e.touches)?void 0:f.length)>1)return e.preventDefault(),!1;if(!h&&!i&&!p&&g||!r&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(r)&&!r.includes(e.button)&&"mousedown"===e.type)return!1;let m=Array.isArray(r)&&r.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||g)&&m}}({zoomActivationKeyPressed:E,panOnDrag:a,zoomOnScroll:_,panOnScroll:l,zoomOnDoubleClick:S,zoomOnPinch:b,userSelectionActive:i,noPanClassName:n,noWheelClassName:t,lib:M,connectionInProgress:k});p.filter(P),S?g.on("dblclick.zoom",v):g.on("dblclick.zoom",null)},destroy:x,setViewport:async function e(e,t){let n=oi(e);return await y(n,t),new Promise(e=>e(n))},setViewportConstrained:w,getViewport:function(){let e=g?tV(g.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return g?new Promise(n=>{null==p||p.interpolate((null==t?void 0:t.interpolate)==="linear"?tQ:ew).scaleTo(os(g,null==t?void 0:t.duration,null==t?void 0:t.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return g?new Promise(n=>{null==p||p.interpolate((null==t?void 0:t.interpolate)==="linear"?tQ:ew).scaleBy(os(g,null==t?void 0:t.duration,null==t?void 0:t.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){null==p||p.scaleExtent(e)},setTranslateExtent:function(e){null==p||p.translateExtent(e)},syncViewport:function(e){if(g){let t=oi(e),n=g.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&(null==p||p.transform(g,t,null,{sync:!0}))}},setClickDistance:function(e){let t=!nv(e)||e<0?0:e;null==p||p.clickDistance(t)}}}({domNode:M.current,minZoom:p,maxZoom:g,translateExtent:h,viewport:f,paneClickDistance:S,onDraggingChange:e=>E.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:o}=E.getState();null==o||o(e,t),null==n||n(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:o}=E.getState();null==o||o(e,t),null==n||n(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:o}=E.getState();null==o||o(e,t),null==n||n(t)}});let{x:e,y:t,zoom:n}=A.current.getViewport();return E.setState({panZoom:A.current,transform:[e,t,n],domNode:M.current.closest(".react-flow")}),()=>{var e;null==(e=A.current)||e.destroy()}}},[]),(0,d.useEffect)(()=>{var e;null==(e=A.current)||e.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:i,panOnScrollSpeed:l,panOnScrollMode:a,zoomOnDoubleClick:u,panOnDrag:s,zoomActivationKeyPressed:P,preventScrolling:v,noPanClassName:w,userSelectionActive:C,noWheelClassName:x,lib:k,onTransformChange:z,connectionInProgress:N})},[t,n,r,i,l,a,u,s,P,v,w,C,x,k,z,N]),(0,c.jsx)("div",{className:"react-flow__renderer",ref:M,style:ru,children:y})}let rd=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rf(){let{userSelectionActive:e,userSelectionRect:t}=oN(rd,oE);return e&&t?(0,c.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}let rh=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},rp=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function rg(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:o=r.Full,panOnDrag:i,selectionOnDrag:l,onSelectionStart:a,onSelectionEnd:u,onPaneClick:s,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:v,children:y}=e,x=oP(),{userSelectionActive:w,elementsSelectable:b,dragging:_,connectionInProgress:S}=oN(rp,oE),E=b&&(t||w),M=(0,d.useRef)(null),C=(0,d.useRef)(),k=(0,d.useRef)(new Set),N=(0,d.useRef)(new Set),P=(0,d.useRef)(!1),A=(0,d.useRef)(!1),j=e=>{if(P.current||S){P.current=!1;return}null==s||s(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},z=!0===i||Array.isArray(i)&&i.includes(0);return(0,c.jsxs)("div",{className:f(["react-flow__pane",{draggable:z,dragging:_,selection:t}]),onClick:E?void 0:rh(j,M),onContextMenu:rh(e=>{if(Array.isArray(i)&&(null==i?void 0:i.includes(2)))return void e.preventDefault();null==h||h(e)},M),onWheel:rh(p?e=>p(e):void 0,M),onPointerEnter:E?void 0:g,onPointerDown:E?e=>{var n,o;let{resetSelectedElements:r,domNode:i}=x.getState();if(C.current=null==i?void 0:i.getBoundingClientRect(),!b||!t||0!==e.button||e.target!==M.current||!C.current)return;null==(o=e.target)||null==(n=o.setPointerCapture)||n.call(o,e.pointerId),A.current=!0,P.current=!1;let{x:l,y:u}=nR(e.nativeEvent,C.current);r(),x.setState({userSelectionRect:{width:0,height:0,startX:l,startY:u,x:l,y:u}}),null==a||a(e)}:m,onPointerMove:E?e=>{var t,n;let{userSelectionRect:i,transform:l,nodeLookup:a,edgeLookup:u,connectionLookup:s,triggerNodeChanges:c,triggerEdgeChanges:d,defaultEdgeOptions:f}=x.getState();if(!C.current||!i)return;P.current=!0;let{x:h,y:p}=nR(e.nativeEvent,C.current),{startX:g,startY:m}=i,v={startX:g,startY:m,x:h<g?h:g,y:p<m?p:m,width:Math.abs(h-g),height:Math.abs(p-m)},y=k.current,w=N.current;k.current=new Set(ne(a,v,l,o===r.Partial,!0).map(e=>e.id)),N.current=new Set;let b=null==(t=null==f?void 0:f.selectable)||t;for(let e of k.current){let t=s.get(e);if(t)for(let{edgeId:e}of t.values()){let t=u.get(e);t&&(null!=(n=t.selectable)?n:b)&&N.current.add(e)}}nP(y,k.current)||c(o4(a,k.current,!0)),nP(w,N.current)||d(o4(u,N.current)),x.setState({userSelectionRect:v,userSelectionActive:!0,nodesSelectionActive:!1})}:m,onPointerUp:E?e=>{var t,o;if(0!==e.button||!A.current)return;null==(o=e.target)||null==(t=o.releasePointerCapture)||t.call(o,e.pointerId);let{userSelectionRect:r}=x.getState();!w&&r&&e.target===M.current&&(null==j||j(e)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:k.current.size>0}),null==u||u(e),(n||l)&&(P.current=!1),A.current=!1}:void 0,onPointerLeave:v,ref:M,style:ru,children:[y,(0,c.jsx)(rf,{})]})}function rm(e){let{id:t,store:n,unselect:o=!1,nodeRef:r}=e,{addSelectedNodes:i,unselectNodesAndEdges:l,multiSelectionActive:a,nodeLookup:u,onError:s}=n.getState(),c=u.get(t);if(!c){null==s||s("012",t$.error012(t));return}n.setState({nodesSelectionActive:!1}),c.selected?(o||c.selected&&a)&&(l({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var e;return null==r||null==(e=r.current)?void 0:e.blur()})):i([t])}function rv(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:r,nodeId:i,isSelectable:l,nodeClickDistance:a}=e,u=oP(),[s,c]=(0,d.useState)(!1),f=(0,d.useRef)();return(0,d.useEffect)(()=>{f.current=function(e){let{onNodeMouseDown:t,getStoreItems:n,onDragStart:o,onDrag:r,onDragStop:i}=e,l={x:null,y:null},a=0,u=new Map,s=!1,c={x:0,y:0},d=null,f=!1,h=null,p=!1,g=!1,m=null;return{update:function(e){let{noDragClassName:v,handleSelector:y,domNode:x,isSelectable:w,nodeId:b,nodeClickDistance:_=0}=e;function S(e){let{x:t,y:o}=e,{nodeLookup:i,nodeExtent:a,snapGrid:s,snapToGrid:c,nodeOrigin:d,onNodeDrag:f,onSelectionDrag:h,onError:p,updateNodePositions:v}=n();l={x:t,y:o};let y=!1,x=u.size>1,w=x&&a?nc(t7(u)):null,_=x&&c?function(e){let{dragItems:t,snapGrid:n,x:o,y:r}=e,i=t.values().next().value;if(!i)return null;let l={x:o-i.distance.x,y:r-i.distance.y},a=nx(l,n);return{x:a.x-l.x,y:a.y-l.y}}({dragItems:u,snapGrid:s,x:t,y:o}):null;for(let[e,n]of u){if(!i.has(e))continue;let r={x:t-n.distance.x,y:o-n.distance.y};c&&(r=_?{x:Math.round(r.x+_.x),y:Math.round(r.y+_.y)}:nx(r,s));let l=null;if(x&&a&&!n.extent&&w){let{positionAbsolute:e}=n.internals,t=e.x-w.x+a[0][0],o=e.x+n.measured.width-w.x2+a[1][0];l=[[t,e.y-w.y+a[0][1]],[o,e.y+n.measured.height-w.y2+a[1][1]]]}let{position:u,positionAbsolute:f}=nn({nodeId:e,nextPosition:r,nodeLookup:i,nodeExtent:l||a,nodeOrigin:d,onError:p});y=y||n.position.x!==u.x||n.position.y!==u.y,n.position=u,n.internals.positionAbsolute=f}if(g=g||y,y&&(v(u,!0),m&&(r||f||!b&&h))){let[e,t]=n9({nodeId:b,dragItems:u,nodeLookup:i});null==r||r(m,u,e,t),null==f||f(m,e,t),b||null==h||h(m,t)}}async function E(){if(!d)return;let{transform:e,panBy:t,autoPanSpeed:o,autoPanOnNodeDrag:r}=n();if(!r){s=!1,cancelAnimationFrame(a);return}let[i,u]=nu(c,d,o);if(0!==i||0!==u){var f,h;l.x=(null!=(f=l.x)?f:0)-i/e[2],l.y=(null!=(h=l.y)?h:0)-u/e[2],await t({x:i,y:u})&&S(l)}a=requestAnimationFrame(E)}function M(e){let{nodeLookup:r,multiSelectionActive:i,nodesDraggable:a,transform:s,snapGrid:c,snapToGrid:h,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:v}=n();if(f=!0,(!p||!w)&&!i&&b){var y;(null==(y=r.get(b))?void 0:y.selected)||v()}w&&p&&b&&(null==t||t(b));let x=nA(e.sourceEvent,{transform:s,snapGrid:c,snapToGrid:h,containerBounds:d});if(l=x,(u=function(e,t,n,o){let r=new Map;for(let[a,u]of e)if((u.selected||u.id===o)&&(!u.parentId||!function e(t,n){if(!t.parentId)return!1;let o=n.get(t.parentId);return!!o&&(!!o.selected||e(o,n))}(u,e))&&(u.draggable||t&&void 0===u.draggable)){let t=e.get(a);if(t){var i,l;r.set(a,{id:a,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!=(i=t.measured.width)?i:0,height:null!=(l=t.measured.height)?l:0}})}}return r}(r,a,x,b)).size>0&&(o||g||!b&&m)){let[t,n]=n9({nodeId:b,dragItems:u,nodeLookup:r});null==o||o(e.sourceEvent,u,t,n),null==g||g(e.sourceEvent,t,n),b||null==m||m(e.sourceEvent,n)}}h=er(x);let C=ey().clickDistance(_).on("start",e=>{let{domNode:t,nodeDragThreshold:o,transform:r,snapGrid:i,snapToGrid:a}=n();d=(null==t?void 0:t.getBoundingClientRect())||null,p=!1,g=!1,m=e.sourceEvent,0===o&&M(e),l=nA(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:a,containerBounds:d}),c=nR(e.sourceEvent,d)}).on("drag",e=>{let{autoPanOnNodeDrag:t,transform:o,snapGrid:r,snapToGrid:i,nodeDragThreshold:a,nodeLookup:h}=n(),g=nA(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:i,containerBounds:d});if(m=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!h.has(b))&&(p=!0),!p){if(!s&&t&&f&&(s=!0,E()),!f){let t=nR(e.sourceEvent,d),n=t.x-c.x,o=t.y-c.y;Math.sqrt(n*n+o*o)>a&&M(e)}(l.x!==g.xSnapped||l.y!==g.ySnapped)&&u&&f&&(c=nR(e.sourceEvent,d),S(g))}}).on("end",e=>{if(f&&!p&&(s=!1,f=!1,cancelAnimationFrame(a),u.size>0)){let{nodeLookup:t,updateNodePositions:o,onNodeDragStop:r,onSelectionDragStop:l}=n();if(g&&(o(u,!1),g=!1),i||r||!b&&l){let[n,o]=n9({nodeId:b,dragItems:u,nodeLookup:t,dragging:!1});null==i||i(e.sourceEvent,u,n,o),null==r||r(e.sourceEvent,n,o),b||null==l||l(e.sourceEvent,o)}}}).filter(e=>{let t=e.target;return!e.button&&(!v||!n6(t,".".concat(v),x))&&(!y||n6(t,y,x))});h.call(C)},destroy:function(){null==h||h.on(".drag",null)}}}({getStoreItems:()=>u.getState(),onNodeMouseDown:e=>{rm({id:e,store:u,nodeRef:t})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),(0,d.useEffect)(()=>{var e,u;if(n)null==(e=f.current)||e.destroy();else if(t.current)return null==(u=f.current)||u.update({noDragClassName:o,handleSelector:r,domNode:t.current,isSelectable:l,nodeId:i,nodeClickDistance:a}),()=>{var e;null==(e=f.current)||e.destroy()}},[o,r,n,l,t,i]),s}function ry(){let e=oP();return(0,d.useCallback)(t=>{let{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:l,updateNodePositions:a,nodeLookup:u,nodeOrigin:s}=e.getState(),c=new Map,d=e=>e.selected&&(e.draggable||i&&void 0===e.draggable),f=o?r[0]:5,h=o?r[1]:5,p=t.direction.x*f*t.factor,g=t.direction.y*h*t.factor;for(let[,e]of u){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};o&&(t=nx(t,r));let{position:i,positionAbsolute:a}=nn({nodeId:e.id,nextPosition:t,nodeLookup:u,nodeExtent:n,nodeOrigin:s,onError:l});e.position=i,e.internals.positionAbsolute=a,c.set(e.id,e)}a(c)},[])}let rx=(0,d.createContext)(null),rw=rx.Provider;rx.Consumer;let rb=()=>(0,d.useContext)(rx),r_=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),rS=(0,d.memo)(o7(function(e,t){let{type:o="source",position:r=a.Top,isValidConnection:i,isConnectable:l=!0,isConnectableStart:u=!0,isConnectableEnd:s=!0,id:d,onConnect:h,children:p,className:g,onMouseDown:m,onTouchStart:v,...y}=e,x=d||null,w="target"===o,b=oP(),_=rb(),{connectOnClick:S,noPanClassName:E,rfId:M}=oN(r_,oE),{connectingFrom:C,connectingTo:k,clickConnecting:N,isPossibleEndHandle:P,connectionInProcess:A,clickConnectionInProcess:j,valid:z}=oN(e=>{let{connectionClickStartHandle:t,connectionMode:r,connection:i}=e,{fromHandle:l,toHandle:a,isValid:u}=i,s=(null==a?void 0:a.nodeId)===_&&(null==a?void 0:a.id)===x&&(null==a?void 0:a.type)===o;return{connectingFrom:(null==l?void 0:l.nodeId)===_&&(null==l?void 0:l.id)===x&&(null==l?void 0:l.type)===o,connectingTo:s,clickConnecting:(null==t?void 0:t.nodeId)===_&&(null==t?void 0:t.id)===x&&(null==t?void 0:t.type)===o,isPossibleEndHandle:r===n.Strict?(null==l?void 0:l.type)!==o:_!==(null==l?void 0:l.nodeId)||x!==(null==l?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!t,valid:s&&u}},oE);if(!_){var O,I;null==(O=(I=b.getState()).onError)||O.call(I,"010",t$.error010())}let R=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=b.getState(),r={...t,...e};if(o){let e,t,{edges:n,setEdges:o}=b.getState();o(r.source&&r.target?(t=e=t4(r)?{...r}:{...r,id:(e=>{let{source:t,sourceHandle:n,target:o,targetHandle:r}=e;return"xy-edge__".concat(t).concat(n||"","-").concat(o).concat(r||"")})(r)},n.some(e=>e.source===t.source&&e.target===t.target&&(e.sourceHandle===t.sourceHandle||!e.sourceHandle&&!t.sourceHandle)&&(e.targetHandle===t.targetHandle||!e.targetHandle&&!t.targetHandle)))?n:(null===e.sourceHandle&&delete e.sourceHandle,null===e.targetHandle&&delete e.targetHandle,n.concat(e)):(ny("006",t$.error006()),n))}null==n||n(r),null==h||h(r)},D=e=>{if(!_)return;let t="clientX"in e.nativeEvent;if(u&&(t&&0===e.button||!t)){let t=b.getState();oo.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:w,handleId:x,nodeId:_,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:R,isValidConnection:i||t.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?null==m||m(e):null==v||v(e)};return(0,c.jsx)("div",{"data-handleid":x,"data-nodeid":_,"data-handlepos":r,"data-id":"".concat(M,"-").concat(_,"-").concat(x,"-").concat(o),className:f(["react-flow__handle","react-flow__handle-".concat(r),"nodrag",E,g,{source:!w,target:w,connectable:l,connectablestart:u,connectableend:s,clickconnecting:N,connectingfrom:C,connectingto:k,valid:z,connectionindicator:l&&(!A||P)&&(A||j?s:u)}]),onMouseDown:D,onTouchStart:D,onClick:S?e=>{let{onClickConnectStart:t,onClickConnectEnd:n,connectionClickStartHandle:r,connectionMode:l,isValidConnection:a,lib:s,rfId:c,nodeLookup:d,connection:f}=b.getState();if(!_||!r&&!u)return;if(!r){null==t||t(e.nativeEvent,{nodeId:_,handleId:x,handleType:o}),b.setState({connectionClickStartHandle:{nodeId:_,type:o,id:x}});return}let h=nz(e.target),p=i||a,{connection:g,isValid:m}=oo.isValid(e.nativeEvent,{handle:{nodeId:_,id:x,type:o},connectionMode:l,fromNodeId:r.nodeId,fromHandleId:r.id||null,fromType:r.type,isValidConnection:p,flowId:c,doc:h,lib:s,nodeLookup:d});m&&g&&R(g);let v=structuredClone(f);delete v.inProgress,v.toPosition=v.toHandle?v.toHandle.position:null,null==n||n(e,v),b.setState({connectionClickStartHandle:null})}:void 0,ref:t,...y,children:p})})),rE={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},rM={input:function(e){let{data:t,isConnectable:n,sourcePosition:o=a.Bottom}=e;return(0,c.jsxs)(c.Fragment,{children:[null==t?void 0:t.label,(0,c.jsx)(rS,{type:"source",position:o,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:o=a.Top,sourcePosition:r=a.Bottom}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(rS,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label,(0,c.jsx)(rS,{type:"source",position:r,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:o=a.Top}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(rS,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label]})},group:function(){return null}},rC=e=>{let{width:t,height:n,x:o,y:r}=t7(e.nodeLookup,{filter:e=>!!e.selected});return{width:nv(t)?t:null,height:nv(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(o,"px,").concat(r,"px)")}};function rk(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:o}=e,r=oP(),{width:i,height:l,transformString:a,userSelectionActive:u}=oN(rC,oE),s=ry(),h=(0,d.useRef)(null);if((0,d.useEffect)(()=>{if(!o){var e;null==(e=h.current)||e.focus({preventScroll:!0})}},[o]),rv({nodeRef:h}),u||!i||!l)return null;let p=t?e=>{t(e,r.getState().nodes.filter(e=>e.selected))}:void 0;return(0,c.jsx)("div",{className:f(["react-flow__nodesselection","react-flow__container",n]),style:{transform:a},children:(0,c.jsx)("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(rE,e.key)&&(e.preventDefault(),s({direction:rE[e.key],factor:e.shiftKey?4:1}))},style:{width:i,height:l}})})}let rN="undefined"!=typeof window?window:void 0,rP=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function rA(e){let{children:t,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:l,onPaneScroll:a,paneClickDistance:u,deleteKeyCode:s,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:x,elementsSelectable:w,zoomOnScroll:b,zoomOnPinch:_,panOnScroll:S,panOnScrollSpeed:E,panOnScrollMode:M,zoomOnDoubleClick:C,panOnDrag:k,defaultViewport:N,translateExtent:P,minZoom:A,maxZoom:j,preventScrolling:z,onSelectionContextMenu:O,noWheelClassName:I,noPanClassName:R,disableKeyboardA11y:D,onViewportChange:L,isControlledViewport:B}=e,{nodesSelectionActive:T,userSelectionActive:H}=oN(rP),V=o0(f,{target:rN}),F=o0(y,{target:rN}),X=F||k,Y=F||S,Z=h&&!0!==X,q=V||H||Z;return!function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e,o=oP(),{deleteElements:r}=ri(),i=o0(t,{actInsideInputWithModifier:!1}),l=o0(n,{target:ra});(0,d.useEffect)(()=>{if(i){let{edges:e,nodes:t}=o.getState();r({nodes:t.filter(rl),edges:e.filter(rl)}),o.setState({nodesSelectionActive:!1})}},[i]),(0,d.useEffect)(()=>{o.setState({multiSelectionActive:l})},[l])}({deleteKeyCode:s,multiSelectionKeyCode:v}),(0,c.jsx)(rc,{onPaneContextMenu:l,elementsSelectable:w,zoomOnScroll:b,zoomOnPinch:_,panOnScroll:Y,panOnScrollSpeed:E,panOnScrollMode:M,zoomOnDoubleClick:C,panOnDrag:!V&&X,defaultViewport:N,translateExtent:P,minZoom:A,maxZoom:j,zoomActivationKeyCode:x,preventScrolling:z,noWheelClassName:I,noPanClassName:R,onViewportChange:L,isControlledViewport:B,paneClickDistance:u,children:(0,c.jsxs)(rg,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:l,onPaneScroll:a,panOnDrag:X,isSelecting:!!q,selectionMode:p,selectionKeyPressed:V,selectionOnDrag:Z,children:[t,T&&(0,c.jsx)(rk,{onSelectionContextMenu:O,noPanClassName:R,disableKeyboardA11y:D})]})})}rA.displayName="FlowRenderer";let rj=(0,d.memo)(rA),rz=e=>e.updateNodeInternals;function rO(e){var t,n,o,r,i,l,a,u,s,h,p,g,m;let{id:v,onClick:y,onMouseEnter:x,onMouseMove:w,onMouseLeave:b,onContextMenu:_,onDoubleClick:S,nodesDraggable:E,elementsSelectable:M,nodesConnectable:C,nodesFocusable:k,resizeObserver:N,noDragClassName:P,noPanClassName:A,disableKeyboardA11y:j,rfId:z,nodeTypes:O,nodeClickDistance:I,onError:R}=e,{node:D,internals:L,isParent:B}=oN(e=>{let t=e.nodeLookup.get(v),n=e.parentLookup.has(v);return{node:t,internals:t.internals,isParent:n}},oE),T=D.type||"default",H=(null==O?void 0:O[T])||rM[T];void 0===H&&(null==R||R("003",t$.error003(T)),T="default",H=(null==O?void 0:O.default)||rM.default);let V=!!(D.draggable||E&&void 0===D.draggable),F=!!(D.selectable||M&&void 0===D.selectable),X=!!(D.connectable||C&&void 0===D.connectable),Y=!!(D.focusable||k&&void 0===D.focusable),Z=oP(),q=nk(D),W=function(e){let{node:t,nodeType:n,hasDimensions:o,resizeObserver:r}=e,i=oP(),l=(0,d.useRef)(null),a=(0,d.useRef)(null),u=(0,d.useRef)(t.sourcePosition),s=(0,d.useRef)(t.targetPosition),c=(0,d.useRef)(n),f=o&&!!t.internals.handleBounds;return(0,d.useEffect)(()=>{!l.current||t.hidden||f&&a.current===l.current||(a.current&&(null==r||r.unobserve(a.current)),null==r||r.observe(l.current),a.current=l.current)},[f,t.hidden]),(0,d.useEffect)(()=>()=>{a.current&&(null==r||r.unobserve(a.current),a.current=null)},[]),(0,d.useEffect)(()=>{if(l.current){let e=c.current!==n,o=u.current!==t.sourcePosition,r=s.current!==t.targetPosition;(e||o||r)&&(c.current=n,u.current=t.sourcePosition,s.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:l.current,force:!0}]])))}},[t.id,n,t.sourcePosition,t.targetPosition]),l}({node:D,nodeType:T,hasDimensions:q,resizeObserver:N}),K=rv({nodeRef:W,disabled:D.hidden||!V,noDragClassName:P,handleSelector:D.dragHandle,nodeId:v,isSelectable:F,nodeClickDistance:I}),U=ry();if(D.hidden)return null;let G=nC(D),Q=void 0===D.internals.handleBounds?{width:null!=(s=null!=(u=D.width)?u:D.initialWidth)?s:null==(l=D.style)?void 0:l.width,height:null!=(p=null!=(h=D.height)?h:D.initialHeight)?p:null==(a=D.style)?void 0:a.height}:{width:null!=(g=D.width)?g:null==(r=D.style)?void 0:r.width,height:null!=(m=D.height)?m:null==(i=D.style)?void 0:i.height},$=F||V||y||x||w||b,J=x?e=>x(e,{...L.userNode}):void 0,ee=w?e=>w(e,{...L.userNode}):void 0,et=b?e=>b(e,{...L.userNode}):void 0,en=_?e=>_(e,{...L.userNode}):void 0,eo=S?e=>S(e,{...L.userNode}):void 0;return(0,c.jsx)("div",{className:f(["react-flow__node","react-flow__node-".concat(T),{[A]:V},D.className,{selected:D.selected,selectable:F,parent:B,draggable:V,dragging:K}]),ref:W,style:{zIndex:L.z,transform:"translate(".concat(L.positionAbsolute.x,"px,").concat(L.positionAbsolute.y,"px)"),pointerEvents:$?"all":"none",visibility:q?"visible":"hidden",...D.style,...Q},"data-id":v,"data-testid":"rf__node-".concat(v),onMouseEnter:J,onMouseMove:ee,onMouseLeave:et,onContextMenu:en,onClick:e=>{let{selectNodesOnDrag:t,nodeDragThreshold:n}=Z.getState();F&&(!t||!V||n>0)&&rm({id:v,store:Z,nodeRef:W}),y&&y(e,{...L.userNode})},onDoubleClick:eo,onKeyDown:Y?e=>{if(!nI(e.nativeEvent)&&!j){if(t0.includes(e.key)&&F)rm({id:v,store:Z,unselect:"Escape"===e.key,nodeRef:W});else if(V&&D.selected&&Object.prototype.hasOwnProperty.call(rE,e.key)){e.preventDefault();let{ariaLabelConfig:t}=Z.getState();Z.setState({ariaLiveMessage:t["node.a11yDescription.ariaLiveMessage"]({direction:e.key.replace("Arrow","").toLowerCase(),x:~~L.positionAbsolute.x,y:~~L.positionAbsolute.y})}),U({direction:rE[e.key],factor:e.shiftKey?4:1})}}}:void 0,tabIndex:Y?0:void 0,onFocus:Y?()=>{var e;if(j||!(null==(e=W.current)?void 0:e.matches(":focus-visible")))return;let{transform:t,width:n,height:o,autoPanOnNodeFocus:r,setCenter:i}=Z.getState();r&&(ne(new Map([[v,D]]),{x:0,y:0,width:n,height:o},t,!0).length>0||i(D.position.x+G.width/2,D.position.y+G.height/2,{zoom:t[2]}))}:void 0,role:null!=(t=D.ariaRole)?t:Y?"group":void 0,"aria-roledescription":"node","aria-describedby":j?void 0:"".concat(oz,"-").concat(z),"aria-label":D.ariaLabel,...D.domAttributes,children:(0,c.jsx)(rw,{value:v,children:(0,c.jsx)(H,{id:v,data:D.data,type:T,positionAbsoluteX:L.positionAbsolute.x,positionAbsoluteY:L.positionAbsolute.y,selected:null!=(n=D.selected)&&n,selectable:F,draggable:V,deletable:null==(o=D.deletable)||o,isConnectable:X,sourcePosition:D.sourcePosition,targetPosition:D.targetPosition,dragging:K,dragHandle:D.dragHandle,zIndex:L.z,parentId:D.parentId,...G})})})}let rI=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function rR(e){var t;let{nodesDraggable:n,nodesConnectable:o,nodesFocusable:r,elementsSelectable:i,onError:l}=oN(rI,oE),a=(t=e.onlyRenderVisibleElements,oN((0,d.useCallback)(e=>t?ne(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(e=>e.id):Array.from(e.nodeLookup.keys()),[t]),oE)),u=function(){let e=oN(rz),[t]=(0,d.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,d.useEffect)(()=>()=>{null==t||t.disconnect()},[t]),t}();return(0,c.jsx)("div",{className:"react-flow__nodes",style:ru,children:a.map(t=>(0,c.jsx)(rO,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:n,nodesConnectable:o,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:l},t))})}rR.displayName="NodeRenderer";let rD=(0,d.memo)(rR),rL={[l.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e,o={strokeWidth:n,...t&&{stroke:t}};return(0,c.jsx)("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[l.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e,o={strokeWidth:n,...t&&{stroke:t,fill:t}};return(0,c.jsx)("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},rB=e=>{let{id:t,type:n,color:o,width:r=12.5,height:i=12.5,markerUnits:l="strokeWidth",strokeWidth:a,orient:u="auto-start-reverse"}=e,s=function(e){let t=oP();return(0,d.useMemo)(()=>{if(!Object.prototype.hasOwnProperty.call(rL,e)){var n,o;return null==(n=(o=t.getState()).onError)||n.call(o,"009",t$.error009(e)),null}return rL[e]},[e])}(n);return s?(0,c.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(r),markerHeight:"".concat(i),viewBox:"-10 -10 20 20",markerUnits:l,orient:u,refX:"0",refY:"0",children:(0,c.jsx)(s,{color:o,strokeWidth:a})}):null},rT=e=>{let{defaultColor:t,rfId:n}=e,o=oN(e=>e.edges),r=oN(e=>e.defaultEdgeOptions),i=(0,d.useMemo)(()=>(function(e,t){let{id:n,defaultColor:o,defaultMarkerStart:r,defaultMarkerEnd:i}=t,l=new Set;return e.reduce((e,t)=>([t.markerStart||r,t.markerEnd||i].forEach(t=>{if(t&&"object"==typeof t){let r=nG(t,n);l.has(r)||(e.push({id:r,color:t.color||o,...t}),l.add(r))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))})(o,{id:n,defaultColor:t,defaultMarkerStart:null==r?void 0:r.markerStart,defaultMarkerEnd:null==r?void 0:r.markerEnd}),[o,r,n,t]);return i.length?(0,c.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,c.jsx)("defs",{children:i.map(e=>(0,c.jsx)(rB,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};rT.displayName="MarkerDefinitions";var rH=(0,d.memo)(rT);function rV(e){let{x:t,y:n,label:o,labelStyle:r,labelShowBg:i=!0,labelBgStyle:l,labelBgPadding:a=[2,4],labelBgBorderRadius:u=2,children:s,className:h,...p}=e,[g,m]=(0,d.useState)({x:1,y:0,width:0,height:0}),v=f(["react-flow__edge-textwrapper",h]),y=(0,d.useRef)(null);return((0,d.useEffect)(()=>{if(y.current){let e=y.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}},[o]),o)?(0,c.jsxs)("g",{transform:"translate(".concat(t-g.width/2," ").concat(n-g.height/2,")"),className:v,visibility:g.width?"visible":"hidden",...p,children:[i&&(0,c.jsx)("rect",{width:g.width+2*a[0],x:-a[0],y:-a[1],height:g.height+2*a[1],className:"react-flow__edge-textbg",style:l,rx:u,ry:u}),(0,c.jsx)("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:y,style:r,children:o}),s]}):null}rV.displayName="EdgeText";let rF=(0,d.memo)(rV);function rX(e){let{path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:l,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:s,interactionWidth:d=20,...h}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("path",{...h,d:t,fill:"none",className:f(["react-flow__edge-path",h.className])}),d?(0,c.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&nv(n)&&nv(o)?(0,c.jsx)(rF,{x:n,y:o,label:r,labelStyle:i,labelShowBg:l,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:s}):null]})}function rY(e){let{pos:t,x1:n,y1:o,x2:r,y2:i}=e;return t===a.Left||t===a.Right?[.5*(n+r),o]:[n,.5*(o+i)]}function rZ(e){let{sourceX:t,sourceY:n,sourcePosition:o=a.Bottom,targetX:r,targetY:i,targetPosition:l=a.Top}=e,[u,s]=rY({pos:o,x1:t,y1:n,x2:r,y2:i}),[c,d]=rY({pos:l,x1:r,y1:i,x2:t,y2:n}),[f,h,p,g]=nL({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return["M".concat(t,",").concat(n," C").concat(u,",").concat(s," ").concat(c,",").concat(d," ").concat(r,",").concat(i),f,h,p,g]}function rq(e){return(0,d.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:l,sourcePosition:a,targetPosition:u,label:s,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:v,markerStart:y,interactionWidth:x}=t,[w,b,_]=rZ({sourceX:o,sourceY:r,sourcePosition:a,targetX:i,targetY:l,targetPosition:u}),S=e.isInternal?void 0:n;return(0,c.jsx)(rX,{id:S,path:w,labelX:b,labelY:_,label:s,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:v,markerStart:y,interactionWidth:x})})}let rW=rq({isInternal:!1}),rK=rq({isInternal:!0});function rU(e){return(0,d.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:l,label:u,labelStyle:s,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:m=a.Bottom,targetPosition:v=a.Top,markerEnd:y,markerStart:x,pathOptions:w,interactionWidth:b}=t,[_,S,E]=nZ({sourceX:o,sourceY:r,sourcePosition:m,targetX:i,targetY:l,targetPosition:v,borderRadius:null==w?void 0:w.borderRadius,offset:null==w?void 0:w.offset,stepPosition:null==w?void 0:w.stepPosition}),M=e.isInternal?void 0:n;return(0,c.jsx)(rX,{id:M,path:_,labelX:S,labelY:E,label:u,labelStyle:s,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:b})})}rW.displayName="SimpleBezierEdge",rK.displayName="SimpleBezierEdgeInternal";let rG=rU({isInternal:!1}),rQ=rU({isInternal:!0});function r$(e){return(0,d.memo)(t=>{var n;let{id:o,...r}=t,i=e.isInternal?void 0:o;return(0,c.jsx)(rG,{...r,id:i,pathOptions:(0,d.useMemo)(()=>{var e;return{borderRadius:0,offset:null==(e=r.pathOptions)?void 0:e.offset}},[null==(n=r.pathOptions)?void 0:n.offset])})})}rG.displayName="SmoothStepEdge",rQ.displayName="SmoothStepEdgeInternal";let rJ=r$({isInternal:!1}),r0=r$({isInternal:!0});function r1(e){return(0,d.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:l,label:a,labelStyle:u,labelShowBg:s,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:v}=t,[y,x,w]=nF({sourceX:o,sourceY:r,targetX:i,targetY:l}),b=e.isInternal?void 0:n;return(0,c.jsx)(rX,{id:b,path:y,labelX:x,labelY:w,label:a,labelStyle:u,labelShowBg:s,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:v})})}rJ.displayName="StepEdge",r0.displayName="StepEdgeInternal";let r2=r1({isInternal:!1}),r5=r1({isInternal:!0});function r3(e){return(0,d.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:l,sourcePosition:u=a.Bottom,targetPosition:s=a.Top,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:m,style:v,markerEnd:y,markerStart:x,pathOptions:w,interactionWidth:b}=t,[_,S,E]=nH({sourceX:o,sourceY:r,sourcePosition:u,targetX:i,targetY:l,targetPosition:s,curvature:null==w?void 0:w.curvature}),M=e.isInternal?void 0:n;return(0,c.jsx)(rX,{id:M,path:_,labelX:S,labelY:E,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:m,style:v,markerEnd:y,markerStart:x,interactionWidth:b})})}r2.displayName="StraightEdge",r5.displayName="StraightEdgeInternal";let r4=r3({isInternal:!1}),r8=r3({isInternal:!0});r4.displayName="BezierEdge",r8.displayName="BezierEdgeInternal";let r6={default:r8,straight:r5,step:r0,smoothstep:rQ,simplebezier:rK},r9={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},r7="react-flow__edgeupdater";function ie(e){let{position:t,centerX:n,centerY:o,radius:r=10,onMouseDown:i,onMouseEnter:l,onMouseOut:u,type:s}=e;return(0,c.jsx)("circle",{onMouseDown:i,onMouseEnter:l,onMouseOut:u,className:f([r7,"".concat(r7,"-").concat(s)]),cx:t===a.Left?n-r:t===a.Right?n+r:n,cy:t===a.Top?o-r:t===a.Bottom?o+r:o,r:r,stroke:"transparent",fill:"transparent"})}function it(e){let{isReconnectable:t,reconnectRadius:n,edge:o,sourceX:r,sourceY:i,targetX:l,targetY:a,sourcePosition:u,targetPosition:s,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,setReconnecting:p,setUpdateHover:g}=e,m=oP(),v=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:n,domNode:r,isValidConnection:i,connectionMode:l,connectionRadius:a,lib:u,onConnectStart:s,onConnectEnd:c,cancelConnection:g,nodeLookup:v,rfId:y,panBy:x,updateConnection:w}=m.getState(),b="target"===t.type;oo.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:l,connectionRadius:a,domNode:r,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:b,edgeUpdaterType:t.type,lib:u,flowId:y,cancelConnection:g,panBy:x,isValidConnection:i,onConnect:e=>null==d?void 0:d(o,e),onConnectStart:(n,r)=>{p(!0),null==f||f(e,o,t.type),null==s||s(n,r)},onConnectEnd:c,onReconnectEnd:(e,n)=>{p(!1),null==h||h(e,o,t.type,n)},updateConnection:w,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},y=()=>g(!0),x=()=>g(!1);return(0,c.jsxs)(c.Fragment,{children:[(!0===t||"source"===t)&&(0,c.jsx)(ie,{position:u,centerX:r,centerY:i,radius:n,onMouseDown:e=>{var t;return v(e,{nodeId:o.target,id:null!=(t=o.targetHandle)?t:null,type:"target"})},onMouseEnter:y,onMouseOut:x,type:"source"}),(!0===t||"target"===t)&&(0,c.jsx)(ie,{position:s,centerX:l,centerY:a,radius:n,onMouseDown:e=>{var t;return v(e,{nodeId:o.source,id:null!=(t=o.sourceHandle)?t:null,type:"source"})},onMouseEnter:y,onMouseOut:x,type:"target"})]})}function io(e){var t,o;let{id:r,edgesFocusable:i,edgesReconnectable:l,elementsSelectable:u,onClick:s,onDoubleClick:h,onContextMenu:p,onMouseEnter:g,onMouseMove:m,onMouseLeave:v,reconnectRadius:y,onReconnect:x,onReconnectStart:w,onReconnectEnd:b,rfId:_,edgeTypes:S,noPanClassName:E,onError:M,disableKeyboardA11y:C}=e,k=oN(e=>e.edgeLookup.get(r)),N=oN(e=>e.defaultEdgeOptions),P=(k=N?{...N,...k}:k).type||"default",A=(null==S?void 0:S[P])||r6[P];void 0===A&&(null==M||M("011",t$.error011(P)),P="default",A=(null==S?void 0:S.default)||r6.default);let j=!!(k.focusable||i&&void 0===k.focusable),z=void 0!==x&&(k.reconnectable||l&&void 0===k.reconnectable),O=!!(k.selectable||u&&void 0===k.selectable),I=(0,d.useRef)(null),[R,D]=(0,d.useState)(!1),[L,B]=(0,d.useState)(!1),T=oP(),{zIndex:H,sourceX:V,sourceY:F,targetX:X,targetY:Y,sourcePosition:Z,targetPosition:q}=oN((0,d.useCallback)(e=>{let t=e.nodeLookup.get(k.source),o=e.nodeLookup.get(k.target);if(!t||!o)return{zIndex:k.zIndex,...r9};let i=function(e){var t,o,r,i,l;let{sourceNode:u,targetNode:s}=e;if(!nq(u)||!nq(s))return null;let c=u.internals.handleBounds||nW(u.handles),d=s.internals.handleBounds||nW(s.handles),f=nU(null!=(t=null==c?void 0:c.source)?t:[],e.sourceHandle),h=nU(e.connectionMode===n.Strict?null!=(o=null==d?void 0:d.target)?o:[]:(null!=(r=null==d?void 0:d.target)?r:[]).concat(null!=(i=null==d?void 0:d.source)?i:[]),e.targetHandle);if(!f||!h)return null==(l=e.onError)||l.call(e,"008",t$.error008(f?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let p=(null==f?void 0:f.position)||a.Bottom,g=(null==h?void 0:h.position)||a.Top,m=nK(u,f,p),v=nK(s,h,g);return{sourceX:m.x,sourceY:m.y,targetX:v.x,targetY:v.y,sourcePosition:p,targetPosition:g}}({id:r,sourceNode:t,targetNode:o,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:e.connectionMode,onError:M});return{zIndex:function(e){let{sourceNode:t,targetNode:n,selected:o=!1,zIndex:r,elevateOnSelect:i=!1}=e;if(void 0!==r)return r;let l=Math.max(t.parentId||i&&t.selected?t.internals.z:0,n.parentId||i&&n.selected?n.internals.z:0);return(i&&o?1e3:0)+l}({selected:k.selected,zIndex:k.zIndex,sourceNode:t,targetNode:o,elevateOnSelect:e.elevateEdgesOnSelect}),...i||r9}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),oE),W=(0,d.useMemo)(()=>k.markerStart?"url('#".concat(nG(k.markerStart,_),"')"):void 0,[k.markerStart,_]),K=(0,d.useMemo)(()=>k.markerEnd?"url('#".concat(nG(k.markerEnd,_),"')"):void 0,[k.markerEnd,_]);if(k.hidden||null===V||null===F||null===X||null===Y)return null;let U=h?e=>{h(e,{...k})}:void 0,G=p?e=>{p(e,{...k})}:void 0,Q=g?e=>{g(e,{...k})}:void 0,$=m?e=>{m(e,{...k})}:void 0,J=v?e=>{v(e,{...k})}:void 0;return(0,c.jsx)("svg",{style:{zIndex:H},children:(0,c.jsxs)("g",{className:f(["react-flow__edge","react-flow__edge-".concat(P),k.className,E,{selected:k.selected,animated:k.animated,inactive:!O&&!s,updating:R,selectable:O}]),onClick:e=>{let{addSelectedEdges:t,unselectNodesAndEdges:n,multiSelectionActive:o}=T.getState();if(O)if(T.setState({nodesSelectionActive:!1}),k.selected&&o){var i;n({nodes:[],edges:[k]}),null==(i=I.current)||i.blur()}else t([r]);s&&s(e,k)},onDoubleClick:U,onContextMenu:G,onMouseEnter:Q,onMouseMove:$,onMouseLeave:J,onKeyDown:j?e=>{if(!C&&t0.includes(e.key)&&O){let{unselectNodesAndEdges:n,addSelectedEdges:o}=T.getState();if("Escape"===e.key){var t;null==(t=I.current)||t.blur(),n({edges:[k]})}else o([r])}}:void 0,tabIndex:j?0:void 0,role:null!=(t=k.ariaRole)?t:j?"group":"img","aria-roledescription":"edge","data-id":r,"data-testid":"rf__edge-".concat(r),"aria-label":null===k.ariaLabel?void 0:k.ariaLabel||"Edge from ".concat(k.source," to ").concat(k.target),"aria-describedby":j?"".concat(oO,"-").concat(_):void 0,ref:I,...k.domAttributes,children:[!L&&(0,c.jsx)(A,{id:r,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:O,deletable:null==(o=k.deletable)||o,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:V,sourceY:F,targetX:X,targetY:Y,sourcePosition:Z,targetPosition:q,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:W,markerEnd:K,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),z&&(0,c.jsx)(it,{edge:k,isReconnectable:z,reconnectRadius:y,onReconnect:x,onReconnectStart:w,onReconnectEnd:b,sourceX:V,sourceY:F,targetX:X,targetY:Y,sourcePosition:Z,targetPosition:q,setUpdateHover:D,setReconnecting:B})]})})}let ir=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ii(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:o,edgeTypes:r,noPanClassName:i,onReconnect:l,onEdgeContextMenu:a,onEdgeMouseEnter:u,onEdgeMouseMove:s,onEdgeMouseLeave:f,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:m,onReconnectEnd:v,disableKeyboardA11y:y}=e,{edgesFocusable:x,edgesReconnectable:w,elementsSelectable:b,onError:_}=oN(ir,oE),S=oN((0,d.useCallback)(e=>{if(!n)return e.edges.map(e=>e.id);let t=[];if(e.width&&e.height)for(let n of e.edges){let o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&function(e){let{sourceNode:t,targetNode:n,width:o,height:r,transform:i}=e,l=ns(nh(t),nh(n));return l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1),ng({x:-i[0]/i[2],y:-i[1]/i[2],width:o/i[2],height:r/i[2]},nd(l))>0}({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[n]),oE);return(0,c.jsxs)("div",{className:"react-flow__edges",children:[(0,c.jsx)(rH,{defaultColor:t,rfId:o}),S.map(e=>(0,c.jsx)(io,{id:e,edgesFocusable:x,edgesReconnectable:w,elementsSelectable:b,noPanClassName:i,onReconnect:l,onContextMenu:a,onMouseEnter:u,onMouseMove:s,onMouseLeave:f,onClick:h,reconnectRadius:p,onDoubleClick:g,onReconnectStart:m,onReconnectEnd:v,rfId:o,onError:_,edgeTypes:r,disableKeyboardA11y:y},e))]})}ii.displayName="EdgeRenderer";let il=(0,d.memo)(ii),ia=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function iu(e){let{children:t}=e,n=oN(ia);return(0,c.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}let is=e=>{var t;return null==(t=e.panZoom)?void 0:t.syncViewport};function ic(e){return e.connection.inProgress?{...e.connection,to:nw(e.connection.to,e.transform)}:{...e.connection}}let id=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function ih(e){let{containerStyle:t,style:n,type:o,component:r}=e,{nodesConnectable:i,width:l,height:a,isValid:u,inProgress:s}=oN(id,oE);return l&&i&&s?(0,c.jsx)("svg",{style:t,width:l,height:a,className:"react-flow__connectionline react-flow__container",children:(0,c.jsx)("g",{className:f(["react-flow__connection",t3(u)]),children:(0,c.jsx)(ip,{style:n,type:o,CustomComponent:r,isValid:u})})}):null}let ip=e=>{let{style:t,type:n=i.Bezier,CustomComponent:o,isValid:r}=e,{inProgress:l,from:a,fromNode:u,fromHandle:s,fromPosition:d,to:f,toNode:h,toHandle:p,toPosition:g}=function(e){return oN(ic,oE)}();if(!l)return;if(o)return(0,c.jsx)(o,{connectionLineType:n,connectionLineStyle:t,fromNode:u,fromHandle:s,fromX:a.x,fromY:a.y,toX:f.x,toY:f.y,fromPosition:d,toPosition:g,connectionStatus:t3(r),toNode:h,toHandle:p});let m="",v={sourceX:a.x,sourceY:a.y,sourcePosition:d,targetX:f.x,targetY:f.y,targetPosition:g};switch(n){case i.Bezier:[m]=nH(v);break;case i.SimpleBezier:[m]=rZ(v);break;case i.Step:[m]=nZ({...v,borderRadius:0});break;case i.SmoothStep:[m]=nZ(v);break;default:[m]=nF(v)}return(0,c.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:t})};ip.displayName="ConnectionLine";let ig={};function im(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ig;(0,d.useRef)(e),oP(),(0,d.useEffect)(()=>{},[e])}function iv(e){let{nodeTypes:t,edgeTypes:n,onInit:o,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:l,onEdgeDoubleClick:a,onNodeMouseEnter:u,onNodeMouseMove:s,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:m,connectionLineType:v,connectionLineStyle:y,connectionLineComponent:x,connectionLineContainerStyle:w,selectionKeyCode:b,selectionOnDrag:_,selectionMode:S,multiSelectionKeyCode:E,panActivationKeyCode:M,zoomActivationKeyCode:C,deleteKeyCode:k,onlyRenderVisibleElements:N,elementsSelectable:P,defaultViewport:A,translateExtent:j,minZoom:z,maxZoom:O,preventScrolling:I,defaultMarkerColor:R,zoomOnScroll:D,zoomOnPinch:L,panOnScroll:B,panOnScrollSpeed:T,panOnScrollMode:H,zoomOnDoubleClick:V,panOnDrag:F,onPaneClick:X,onPaneMouseEnter:Y,onPaneMouseMove:Z,onPaneMouseLeave:q,onPaneScroll:W,onPaneContextMenu:K,paneClickDistance:U,nodeClickDistance:G,onEdgeContextMenu:Q,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:et,onReconnect:en,onReconnectStart:eo,onReconnectEnd:er,noDragClassName:ei,noWheelClassName:el,noPanClassName:ea,disableKeyboardA11y:eu,nodeExtent:es,rfId:ec,viewport:ed,onViewportChange:ef}=e;im(t),im(n),oP(),(0,d.useRef)(!1),(0,d.useEffect)(()=>{},[]);let eh=ri(),ep=(0,d.useRef)(!1);return(0,d.useEffect)(()=>{!ep.current&&eh.viewportInitialized&&o&&(setTimeout(()=>o(eh),1),ep.current=!0)},[o,eh.viewportInitialized]),!function(e){let t=oN(is),n=oP();(0,d.useEffect)(()=>{e&&(null==t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ed),(0,c.jsx)(rj,{onPaneClick:X,onPaneMouseEnter:Y,onPaneMouseMove:Z,onPaneMouseLeave:q,onPaneContextMenu:K,onPaneScroll:W,paneClickDistance:U,deleteKeyCode:k,selectionKeyCode:b,selectionOnDrag:_,selectionMode:S,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:E,panActivationKeyCode:M,zoomActivationKeyCode:C,elementsSelectable:P,zoomOnScroll:D,zoomOnPinch:L,zoomOnDoubleClick:V,panOnScroll:B,panOnScrollSpeed:T,panOnScrollMode:H,panOnDrag:F,defaultViewport:A,translateExtent:j,minZoom:z,maxZoom:O,onSelectionContextMenu:p,preventScrolling:I,noDragClassName:ei,noWheelClassName:el,noPanClassName:ea,disableKeyboardA11y:eu,onViewportChange:ef,isControlledViewport:!!ed,children:(0,c.jsxs)(iu,{children:[(0,c.jsx)(il,{edgeTypes:n,onEdgeClick:i,onEdgeDoubleClick:a,onReconnect:en,onReconnectStart:eo,onReconnectEnd:er,onlyRenderVisibleElements:N,onEdgeContextMenu:Q,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:et,defaultMarkerColor:R,noPanClassName:ea,disableKeyboardA11y:eu,rfId:ec}),(0,c.jsx)(ih,{style:y,type:v,component:x,containerStyle:w}),(0,c.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,c.jsx)(rD,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:s,onNodeMouseLeave:f,onNodeContextMenu:h,nodeClickDistance:G,onlyRenderVisibleElements:N,noPanClassName:ea,noDragClassName:ei,disableKeyboardA11y:eu,nodeExtent:es,rfId:ec}),(0,c.jsx)("div",{className:"react-flow__viewport-portal"})]})})}iv.displayName="GraphView";let iy=(0,d.memo)(iv),ix=function(){var e,t,o;let{nodes:r,edges:i,defaultNodes:l,defaultEdges:a,width:u,height:s,fitView:c,fitViewOptions:d,minZoom:f=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=new Map,v=new Map,y=new Map,x=new Map,w=null!=(e=null!=a?a:i)?e:[],b=null!=(t=null!=l?l:r)?t:[],_=null!=p?p:[0,0],S=null!=g?g:tJ;n8(y,x,w);let E=n0(b,m,v,{nodeOrigin:_,nodeExtent:S,elevateNodesOnSelect:!1}),M=[0,0,1];if(c&&u&&s){let{x:e,y:t,zoom:n}=nS(t7(m,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),u,s,f,h,null!=(o=null==d?void 0:d.padding)?o:.1);M=[e,t,n]}return{rfId:"1",width:null!=u?u:0,height:null!=s?s:0,transform:M,nodes:b,nodesInitialized:E,nodeLookup:m,parentLookup:v,edges:w,edgeLookup:x,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==l,hasDefaultEdges:void 0!==a,panZoom:null,minZoom:f,maxZoom:h,translateExtent:tJ,nodeExtent:S,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:n.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:_,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:null!=c&&c,fitViewOptions:d,fitViewResolver:null,connection:{...t2},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:ny,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:t1}};function iw(e){let{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:l,initialMinZoom:a,initialMaxZoom:u,initialFitViewOptions:s,fitView:f,nodeOrigin:h,nodeExtent:p,children:g}=e,[m]=(0,d.useState)(()=>(e=>{let t,n,{nodes:o,edges:r,defaultNodes:i,defaultEdges:l,width:a,height:u,fitView:s,fitViewOptions:c,minZoom:d,maxZoom:f,nodeOrigin:h,nodeExtent:p}=e;return t=(e,t)=>{async function n(){let{nodeLookup:n,panZoom:o,fitViewOptions:r,fitViewResolver:i,width:l,height:a,minZoom:u,maxZoom:s}=t();o&&(await nt({nodes:n,width:l,height:a,panZoom:o,minZoom:u,maxZoom:s},r),null==i||i.resolve(!0),e({fitViewResolver:null}))}return{...ix({nodes:o,edges:r,width:a,height:u,fitView:s,fitViewOptions:c,minZoom:d,maxZoom:f,nodeOrigin:h,nodeExtent:p,defaultNodes:i,defaultEdges:l}),setNodes:o=>{let{nodeLookup:r,parentLookup:i,nodeOrigin:l,elevateNodesOnSelect:a,fitViewQueued:u}=t(),s=n0(o,r,i,{nodeOrigin:l,nodeExtent:p,elevateNodesOnSelect:a,checkEquality:!0});u&&s?(n(),e({nodes:o,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):e({nodes:o,nodesInitialized:s})},setEdges:n=>{let{connectionLookup:o,edgeLookup:r}=t();n8(o,r,n),e({edges:n})},setDefaultNodesAndEdges:(n,o)=>{if(n){let{setNodes:o}=t();o(n),e({hasDefaultNodes:!0})}if(o){let{setEdges:n}=t();n(o),e({hasDefaultEdges:!0})}},updateNodeInternals:o=>{let{triggerNodeChanges:r,nodeLookup:i,parentLookup:l,domNode:a,nodeOrigin:u,nodeExtent:s,debug:c,fitViewQueued:d}=t(),{changes:f,updatedInternals:h}=function(e,t,n,o,r,i){let l=null==o?void 0:o.querySelector(".xyflow__viewport"),a=!1;if(!l)return{changes:[],updatedInternals:a};let u=[],s=window.getComputedStyle(l),{m22:c}=new window.DOMMatrixReadOnly(s.transform),d=[];for(let o of e.values()){let e=t.get(o.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),a=!0;continue}let l=nj(o.nodeElement),s=e.measured.width!==l.width||e.measured.height!==l.height;if(l.width&&l.height&&(s||!e.internals.handleBounds||o.force)){let f=o.nodeElement.getBoundingClientRect(),h=nM(e.extent)?e.extent:i,{positionAbsolute:p}=e.internals;e.parentId&&"parent"===e.extent?p=nl(p,l,t.get(e.parentId)):h&&(p=ni(p,h,l));let g={...e,measured:l,internals:{...e.internals,positionAbsolute:p,handleBounds:{source:nD("source",o.nodeElement,f,c,e.id),target:nD("target",o.nodeElement,f,c,e.id)}}};t.set(e.id,g),e.parentId&&n1(g,t,n,{nodeOrigin:r}),a=!0,s&&(u.push({id:e.id,type:"dimensions",dimensions:l}),e.expandParent&&e.parentId&&d.push({id:e.id,parentId:e.parentId,rect:nf(g,r)}))}}if(d.length>0){let e=n5(d,t,n,r);u.push(...e)}return{changes:u,updatedInternals:a}}(o,i,l,a,u,s);h&&(!function(e,t,n){let o=nJ(nQ,n);for(let n of e.values())if(n.parentId)n1(n,e,t,o);else{let e=ni(t6(n,o.nodeOrigin),nM(n.extent)?n.extent:o.nodeExtent,nC(n));n.internals.positionAbsolute=e}}(i,l,{nodeOrigin:u,nodeExtent:s}),d?(n(),e({fitViewQueued:!1,fitViewOptions:void 0})):e({}),(null==f?void 0:f.length)>0&&(c&&console.log("React Flow: trigger node changes",f),null==r||r(f)))},updateNodePositions:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[],r=[],{nodeLookup:i,triggerNodeChanges:l}=t();for(let[t,l]of e){let e=i.get(t),s=!!((null==e?void 0:e.expandParent)&&(null==e?void 0:e.parentId)&&(null==l?void 0:l.position)),c={id:t,type:"position",position:s?{x:Math.max(0,l.position.x),y:Math.max(0,l.position.y)}:l.position,dragging:n};if(s&&e.parentId){var a,u;o.push({id:t,parentId:e.parentId,rect:{...l.internals.positionAbsolute,width:null!=(a=l.measured.width)?a:0,height:null!=(u=l.measured.height)?u:0}})}r.push(c)}if(o.length>0){let{parentLookup:e,nodeOrigin:n}=t(),l=n5(o,i,e,n);r.push(...l)}l(r)},triggerNodeChanges:e=>{let{onNodesChange:n,setNodes:o,nodes:r,hasDefaultNodes:i,debug:l}=t();(null==e?void 0:e.length)&&(i&&o(o5(e,r)),l&&console.log("React Flow: trigger node changes",e),null==n||n(e))},triggerEdgeChanges:e=>{let{onEdgesChange:n,setEdges:o,edges:r,hasDefaultEdges:i,debug:l}=t();(null==e?void 0:e.length)&&(i&&o(o5(e,r)),l&&console.log("React Flow: trigger edge changes",e),null==n||n(e))},addSelectedNodes:e=>{let{multiSelectionActive:n,edgeLookup:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:l}=t();if(n)return void i(e.map(e=>o3(e,!0)));i(o4(r,new Set([...e]),!0)),l(o4(o))},addSelectedEdges:e=>{let{multiSelectionActive:n,edgeLookup:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:l}=t();if(n)return void l(e.map(e=>o3(e,!0)));l(o4(o,new Set([...e]))),i(o4(r,new Set,!0))},unselectNodesAndEdges:function(){let{nodes:e,edges:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{edges:o,nodes:r,nodeLookup:i,triggerNodeChanges:l,triggerEdgeChanges:a}=t(),u=(e||r).map(e=>{let t=i.get(e.id);return t&&(t.selected=!1),o3(e.id,!1)}),s=(n||o).map(e=>o3(e.id,!1));l(u),a(s)},setMinZoom:n=>{let{panZoom:o,maxZoom:r}=t();null==o||o.setScaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{let{panZoom:o,minZoom:r}=t();null==o||o.setScaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;null==(o=t().panZoom)||o.setTranslateExtent(n),e({translateExtent:n})},setPaneClickDistance:e=>{var n;null==(n=t().panZoom)||n.setClickDistance(e)},resetSelectedElements:()=>{let{edges:e,nodes:n,triggerNodeChanges:o,triggerEdgeChanges:r,elementsSelectable:i}=t();if(!i)return;let l=n.reduce((e,t)=>t.selected?[...e,o3(t.id,!1)]:e,[]),a=e.reduce((e,t)=>t.selected?[...e,o3(t.id,!1)]:e,[]);o(l),r(a)},setNodeExtent:n=>{let{nodes:o,nodeLookup:r,parentLookup:i,nodeOrigin:l,elevateNodesOnSelect:a,nodeExtent:u}=t();(n[0][0]!==u[0][0]||n[0][1]!==u[0][1]||n[1][0]!==u[1][0]||n[1][1]!==u[1][1])&&(n0(o,r,i,{nodeOrigin:l,nodeExtent:n,elevateNodesOnSelect:a,checkEquality:!1}),e({nodeExtent:n}))},panBy:e=>{let{transform:n,width:o,height:r,panZoom:i,translateExtent:l}=t();return n3({delta:e,panZoom:i,transform:n,translateExtent:l,width:o,height:r})},setCenter:async(e,n,o)=>{let{width:r,height:i,maxZoom:l,panZoom:a}=t();if(!a)return Promise.resolve(!1);let u=void 0!==(null==o?void 0:o.zoom)?o.zoom:l;return await a.setViewport({x:r/2-e*u,y:i/2-n*u,zoom:u},{duration:null==o?void 0:o.duration,ease:null==o?void 0:o.ease,interpolate:null==o?void 0:o.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{e({connection:{...t2}})},updateConnection:t=>{e({connection:t})},reset:()=>e({...ix()})}},n=Object.is,t?oS(t,n):oS})({nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:l,fitView:f,minZoom:a,maxZoom:u,fitViewOptions:s,nodeOrigin:h,nodeExtent:p}));return(0,c.jsx)(oC,{value:m,children:(0,c.jsx)(ro,{children:g})})}function ib(e){let{children:t,nodes:n,edges:o,defaultNodes:r,defaultEdges:i,width:l,height:a,fitView:u,fitViewOptions:s,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g}=e;return(0,d.useContext)(oM)?(0,c.jsx)(c.Fragment,{children:t}):(0,c.jsx)(iw,{initialNodes:n,initialEdges:o,defaultNodes:r,defaultEdges:i,initialWidth:l,initialHeight:a,fitView:u,initialFitViewOptions:s,initialMinZoom:f,initialMaxZoom:h,nodeOrigin:p,nodeExtent:g,children:t})}let i_={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var iS=o7(function(e,t){let{nodes:n,edges:l,defaultNodes:a,defaultEdges:u,className:s,nodeTypes:h,edgeTypes:p,onNodeClick:g,onEdgeClick:m,onInit:v,onMove:y,onMoveStart:x,onMoveEnd:w,onConnect:b,onConnectStart:_,onConnectEnd:S,onClickConnectStart:E,onClickConnectEnd:M,onNodeMouseEnter:C,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:P,onNodeDoubleClick:A,onNodeDragStart:j,onNodeDrag:z,onNodeDragStop:O,onNodesDelete:I,onEdgesDelete:R,onDelete:D,onSelectionChange:L,onSelectionDragStart:B,onSelectionDrag:T,onSelectionDragStop:H,onSelectionContextMenu:V,onSelectionStart:F,onSelectionEnd:X,onBeforeDelete:Y,connectionMode:Z,connectionLineType:q=i.Bezier,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:U,deleteKeyCode:G="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:$=!1,selectionMode:J=r.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:et=nE()?"Meta":"Control",zoomActivationKeyCode:en=nE()?"Meta":"Control",snapToGrid:eo,snapGrid:er,onlyRenderVisibleElements:ei=!1,selectNodesOnDrag:el,nodesDraggable:ea,autoPanOnNodeFocus:eu,nodesConnectable:es,nodesFocusable:ec,nodeOrigin:ed=oq,edgesFocusable:ef,edgesReconnectable:eh,elementsSelectable:ep=!0,defaultViewport:eg=oW,minZoom:em=.5,maxZoom:ev=2,translateExtent:ey=tJ,preventScrolling:ex=!0,nodeExtent:ew,defaultMarkerColor:eb="#b1b1b7",zoomOnScroll:e_=!0,zoomOnPinch:eS=!0,panOnScroll:eE=!1,panOnScrollSpeed:eM=.5,panOnScrollMode:eC=o.Free,zoomOnDoubleClick:ek=!0,panOnDrag:eN=!0,onPaneClick:eP,onPaneMouseEnter:eA,onPaneMouseMove:ej,onPaneMouseLeave:ez,onPaneScroll:eO,onPaneContextMenu:eI,paneClickDistance:eR=0,nodeClickDistance:eD=0,children:eL,onReconnect:eB,onReconnectStart:eT,onReconnectEnd:eH,onEdgeContextMenu:eV,onEdgeDoubleClick:eF,onEdgeMouseEnter:eX,onEdgeMouseMove:eY,onEdgeMouseLeave:eZ,reconnectRadius:eq=10,onNodesChange:eW,onEdgesChange:eK,noDragClassName:eU="nodrag",noWheelClassName:eG="nowheel",noPanClassName:eQ="nopan",fitView:e$,fitViewOptions:eJ,connectOnClick:e0,attributionPosition:e1,proOptions:e2,defaultEdgeOptions:e5,elevateNodesOnSelect:e3,elevateEdgesOnSelect:e4,disableKeyboardA11y:e8=!1,autoPanOnConnect:e6,autoPanOnNodeDrag:e9,autoPanSpeed:e7,connectionRadius:te,isValidConnection:tt,onError:tn,style:to,id:tr,nodeDragThreshold:ti,connectionDragThreshold:tl,viewport:ta,onViewportChange:tu,width:ts,height:tc,colorMode:td="light",debug:tf,onScroll:th,ariaLabelConfig:tp,...tg}=e,tm=tr||"1",tv=function(e){var t;let[n,o]=(0,d.useState)("system"===e?null:e);return(0,d.useEffect)(()=>{if("system"!==e)return void o(e);let t=o$(),n=()=>o((null==t?void 0:t.matches)?"dark":"light");return n(),null==t||t.addEventListener("change",n),()=>{null==t||t.removeEventListener("change",n)}},[e]),null!==n?n:(null==(t=o$())?void 0:t.matches)?"dark":"light"}(td),ty=(0,d.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),null==th||th(e)},[th]);return(0,c.jsx)("div",{"data-testid":"rf__wrapper",...tg,onScroll:ty,style:{...to,...i_},ref:t,className:f(["react-flow",s,tv]),id:tr,role:"application",children:(0,c.jsxs)(ib,{nodes:n,edges:l,width:ts,height:tc,fitView:e$,fitViewOptions:eJ,minZoom:em,maxZoom:ev,nodeOrigin:ed,nodeExtent:ew,children:[(0,c.jsx)(iy,{onInit:v,onNodeClick:g,onEdgeClick:m,onNodeMouseEnter:C,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:P,onNodeDoubleClick:A,nodeTypes:h,edgeTypes:p,connectionLineType:q,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:U,selectionKeyCode:Q,selectionOnDrag:$,selectionMode:J,deleteKeyCode:G,multiSelectionKeyCode:et,panActivationKeyCode:ee,zoomActivationKeyCode:en,onlyRenderVisibleElements:ei,defaultViewport:eg,translateExtent:ey,minZoom:em,maxZoom:ev,preventScrolling:ex,zoomOnScroll:e_,zoomOnPinch:eS,zoomOnDoubleClick:ek,panOnScroll:eE,panOnScrollSpeed:eM,panOnScrollMode:eC,panOnDrag:eN,onPaneClick:eP,onPaneMouseEnter:eA,onPaneMouseMove:ej,onPaneMouseLeave:ez,onPaneScroll:eO,onPaneContextMenu:eI,paneClickDistance:eR,nodeClickDistance:eD,onSelectionContextMenu:V,onSelectionStart:F,onSelectionEnd:X,onReconnect:eB,onReconnectStart:eT,onReconnectEnd:eH,onEdgeContextMenu:eV,onEdgeDoubleClick:eF,onEdgeMouseEnter:eX,onEdgeMouseMove:eY,onEdgeMouseLeave:eZ,reconnectRadius:eq,defaultMarkerColor:eb,noDragClassName:eU,noWheelClassName:eG,noPanClassName:eQ,rfId:tm,disableKeyboardA11y:e8,nodeExtent:ew,viewport:ta,onViewportChange:tu}),(0,c.jsx)(oQ,{nodes:n,edges:l,defaultNodes:a,defaultEdges:u,onConnect:b,onConnectStart:_,onConnectEnd:S,onClickConnectStart:E,onClickConnectEnd:M,nodesDraggable:ea,autoPanOnNodeFocus:eu,nodesConnectable:es,nodesFocusable:ec,edgesFocusable:ef,edgesReconnectable:eh,elementsSelectable:ep,elevateNodesOnSelect:e3,elevateEdgesOnSelect:e4,minZoom:em,maxZoom:ev,nodeExtent:ew,onNodesChange:eW,onEdgesChange:eK,snapToGrid:eo,snapGrid:er,connectionMode:Z,translateExtent:ey,connectOnClick:e0,defaultEdgeOptions:e5,fitView:e$,fitViewOptions:eJ,onNodesDelete:I,onEdgesDelete:R,onDelete:D,onNodeDragStart:j,onNodeDrag:z,onNodeDragStop:O,onSelectionDrag:T,onSelectionDragStart:B,onSelectionDragStop:H,onMove:y,onMoveStart:x,onMoveEnd:w,noPanClassName:eQ,nodeOrigin:ed,rfId:tm,autoPanOnConnect:e6,autoPanOnNodeDrag:e9,autoPanSpeed:e7,onError:tn,connectionRadius:te,isValidConnection:tt,selectNodesOnDrag:el,nodeDragThreshold:ti,connectionDragThreshold:tl,onBeforeDelete:Y,paneClickDistance:eR,debug:tf,ariaLabelConfig:tp}),(0,c.jsx)(oZ,{onSelectionChange:L}),eL,(0,c.jsx)(oT,{proOptions:e2,position:e1}),(0,c.jsx)(oL,{rfId:tm,disableKeyboardA11y:e8})]})})});function iE(e){let{dimensions:t,lineWidth:n,variant:o,className:r}=e;return(0,c.jsx)("path",{strokeWidth:n,d:"M".concat(t[0]/2," 0 V").concat(t[1]," M0 ").concat(t[1]/2," H").concat(t[0]),className:f(["react-flow__background-pattern",o,r])})}function iM(e){let{radius:t,className:n}=e;return(0,c.jsx)("circle",{cx:t,cy:t,r:t,className:f(["react-flow__background-pattern","dots",n])})}t$.error014(),function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(s||(s={}));let iC={[s.Dots]:1,[s.Lines]:1,[s.Cross]:6},ik=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function iN(e){let{id:t,variant:n=s.Dots,gap:o=20,size:r,lineWidth:i=1,offset:l=0,color:a,bgColor:u,style:h,className:p,patternClassName:g}=e,m=(0,d.useRef)(null),{transform:v,patternId:y}=oN(ik,oE),x=r||iC[n],w=n===s.Dots,b=n===s.Cross,_=Array.isArray(o)?o:[o,o],S=[_[0]*v[2]||1,_[1]*v[2]||1],E=x*v[2],M=Array.isArray(l)?l:[l,l],C=b?[E,E]:S,k=[M[0]*v[2]||1+C[0]/2,M[1]*v[2]||1+C[1]/2],N="".concat(y).concat(t||"");return(0,c.jsxs)("svg",{className:f(["react-flow__background",p]),style:{...h,...ru,"--xy-background-color-props":u,"--xy-background-pattern-color-props":a},ref:m,"data-testid":"rf__background",children:[(0,c.jsx)("pattern",{id:N,x:v[0]%S[0],y:v[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(k[0],",-").concat(k[1],")"),children:w?(0,c.jsx)(iM,{radius:E/2,className:g}):(0,c.jsx)(iE,{dimensions:C,lineWidth:i,variant:n,className:g})}),(0,c.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(N,")")})]})}iN.displayName="Background";let iP=(0,d.memo)(iN);function iA(){return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,c.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ij(){return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,c.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function iz(){return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,c.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function iO(){return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,c.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function iI(){return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,c.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function iR(e){let{children:t,className:n,...o}=e;return(0,c.jsx)("button",{type:"button",className:f(["react-flow__controls-button",n]),...o,children:t})}let iD=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function iL(e){let{style:t,showZoom:n=!0,showFitView:o=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:l,onZoomOut:a,onFitView:u,onInteractiveChange:s,className:d,children:h,position:p="bottom-left",orientation:g="vertical","aria-label":m}=e,v=oP(),{isInteractive:y,minZoomReached:x,maxZoomReached:w,ariaLabelConfig:b}=oN(iD,oE),{zoomIn:_,zoomOut:S,fitView:E}=ri();return(0,c.jsxs)(oB,{className:f(["react-flow__controls","horizontal"===g?"horizontal":"vertical",d]),position:p,style:t,"data-testid":"rf__controls","aria-label":null!=m?m:b["controls.ariaLabel"],children:[n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(iR,{onClick:()=>{_(),null==l||l()},className:"react-flow__controls-zoomin",title:b["controls.zoomIn.ariaLabel"],"aria-label":b["controls.zoomIn.ariaLabel"],disabled:w,children:(0,c.jsx)(iA,{})}),(0,c.jsx)(iR,{onClick:()=>{S(),null==a||a()},className:"react-flow__controls-zoomout",title:b["controls.zoomOut.ariaLabel"],"aria-label":b["controls.zoomOut.ariaLabel"],disabled:x,children:(0,c.jsx)(ij,{})})]}),o&&(0,c.jsx)(iR,{className:"react-flow__controls-fitview",onClick:()=>{E(i),null==u||u()},title:b["controls.fitView.ariaLabel"],"aria-label":b["controls.fitView.ariaLabel"],children:(0,c.jsx)(iz,{})}),r&&(0,c.jsx)(iR,{className:"react-flow__controls-interactive",onClick:()=>{v.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),null==s||s(!y)},title:b["controls.interactive.ariaLabel"],"aria-label":b["controls.interactive.ariaLabel"],children:y?(0,c.jsx)(iI,{}):(0,c.jsx)(iO,{})}),h]})}iL.displayName="Controls";let iB=(0,d.memo)(iL),iT=(0,d.memo)(function(e){let{id:t,x:n,y:o,width:r,height:i,style:l,color:a,strokeColor:u,strokeWidth:s,className:d,borderRadius:h,shapeRendering:p,selected:g,onClick:m}=e,{background:v,backgroundColor:y}=l||{};return(0,c.jsx)("rect",{className:f(["react-flow__minimap-node",{selected:g},d]),x:n,y:o,rx:h,ry:h,width:r,height:i,style:{fill:a||v||y,stroke:u,strokeWidth:s},shapeRendering:p,onClick:m?e=>m(e,t):void 0})}),iH=e=>e.nodes.map(e=>e.id),iV=e=>e instanceof Function?e:()=>e,iF=(0,d.memo)(function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:o,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:l,shapeRendering:a,NodeComponent:u,onClick:s}=e,{node:d,x:f,y:h,width:p,height:g}=oN(e=>{let{internals:n}=e.nodeLookup.get(t),o=n.userNode,{x:r,y:i}=n.positionAbsolute,{width:l,height:a}=nC(o);return{node:o,x:r,y:i,width:l,height:a}},oE);return d&&!d.hidden&&nk(d)?(0,c.jsx)(u,{x:f,y:h,width:p,height:g,style:d.style,selected:!!d.selected,className:r(d),color:n(d),borderRadius:i,strokeColor:o(d),strokeWidth:l,shapeRendering:a,onClick:s,id:d.id}):null});var iX=(0,d.memo)(function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:o="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:l=iT,onClick:a}=e,u=oN(iH,oE),s=iV(n),d=iV(t),f=iV(o),h="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,c.jsx)(c.Fragment,{children:u.map(e=>(0,c.jsx)(iF,{id:e,nodeColorFunc:s,nodeStrokeColorFunc:d,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:l,onClick:a,shapeRendering:h},e))})});let iY=e=>!e.hidden,iZ=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?np(t7(e.nodeLookup,{filter:iY}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function iq(e){var t,n;let{style:o,className:r,nodeStrokeColor:i,nodeColor:l,nodeClassName:a="",nodeBorderRadius:u=5,nodeStrokeWidth:s,nodeComponent:h,bgColor:p,maskColor:g,maskStrokeColor:m,maskStrokeWidth:v,position:y="bottom-right",onClick:x,onNodeClick:w,pannable:b=!1,zoomable:_=!1,ariaLabel:S,inversePan:E,zoomStep:M=1,offsetScale:C=5}=e,k=oP(),N=(0,d.useRef)(null),{boundingRect:P,viewBB:A,rfId:j,panZoom:z,translateExtent:O,flowWidth:I,flowHeight:R,ariaLabelConfig:D}=oN(iZ,oE),L=null!=(t=null==o?void 0:o.width)?t:200,B=null!=(n=null==o?void 0:o.height)?n:150,T=Math.max(P.width/L,P.height/B),H=T*L,V=T*B,F=C*T,X=P.x-(H-P.width)/2-F,Y=P.y-(V-P.height)/2-F,Z=H+2*F,q=V+2*F,W="".concat("react-flow__minimap-desc","-").concat(j),K=(0,d.useRef)(0),U=(0,d.useRef)();K.current=T,(0,d.useEffect)(()=>{if(N.current&&z)return U.current=function(e){let{domNode:t,panZoom:n,getTransform:o,getViewScale:r}=e,i=er(t);return{update:function(e){let{translateExtent:t,width:l,height:a,zoomStep:u=1,pannable:s=!0,zoomable:c=!0,inversePan:d=!1}=e,f=[0,0],h=tG().on("start",e=>{if("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type){var t,n;f=[null!=(t=e.sourceEvent.clientX)?t:e.sourceEvent.touches[0].clientX,null!=(n=e.sourceEvent.clientY)?n:e.sourceEvent.touches[0].clientY]}}).on("zoom",s?e=>{var i,u;let s=o();if("mousemove"!==e.sourceEvent.type&&"touchmove"!==e.sourceEvent.type||!n)return;let c=[null!=(i=e.sourceEvent.clientX)?i:e.sourceEvent.touches[0].clientX,null!=(u=e.sourceEvent.clientY)?u:e.sourceEvent.touches[0].clientY],h=[c[0]-f[0],c[1]-f[1]];f=c;let p=r()*Math.max(s[2],Math.log(s[2]))*(d?-1:1),g={x:s[0]-h[0]*p,y:s[1]-h[1]*p};n.setViewportConstrained({x:g.x,y:g.y,zoom:s[2]},[[0,0],[l,a]],t)}:null).on("zoom.wheel",c?e=>{if("wheel"!==e.sourceEvent.type||!n)return;let t=o(),r=e.sourceEvent.ctrlKey&&nE()?10:1,i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*u,l=t[2]*Math.pow(2,i*r);n.scaleTo(l)}:null);i.call(h,{})},destroy:function(){i.on("zoom",null)},pointer:ei}}({domNode:N.current,panZoom:z,getTransform:()=>k.getState().transform,getViewScale:()=>K.current}),()=>{var e;null==(e=U.current)||e.destroy()}},[z]),(0,d.useEffect)(()=>{var e;null==(e=U.current)||e.update({translateExtent:O,width:I,height:R,inversePan:E,pannable:b,zoomStep:M,zoomable:_})},[b,_,E,M,O,I,R]);let G=x?e=>{var t;let[n,o]=(null==(t=U.current)?void 0:t.pointer(e))||[0,0];x(e,{x:n,y:o})}:void 0,Q=w?(0,d.useCallback)((e,t)=>{w(e,k.getState().nodeLookup.get(t).internals.userNode)},[]):void 0,$=null!=S?S:D["minimap.ariaLabel"];return(0,c.jsx)(oB,{position:y,style:{...o,"--xy-minimap-background-color-props":"string"==typeof p?p:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof g?g:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof m?m:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof v?v*T:void 0,"--xy-minimap-node-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof i?i:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof s?s:void 0},className:f(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:(0,c.jsxs)("svg",{width:L,height:B,viewBox:"".concat(X," ").concat(Y," ").concat(Z," ").concat(q),className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:N,onClick:G,children:[$&&(0,c.jsx)("title",{id:W,children:$}),(0,c.jsx)(iX,{onClick:Q,nodeColor:l,nodeStrokeColor:i,nodeBorderRadius:u,nodeClassName:a,nodeStrokeWidth:s,nodeComponent:h}),(0,c.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(X-F,",").concat(Y-F,"h").concat(Z+2*F,"v").concat(q+2*F,"h").concat(-Z-2*F,"z\n        M").concat(A.x,",").concat(A.y,"h").concat(A.width,"v").concat(A.height,"h").concat(-A.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}iq.displayName="MiniMap";let iW=(0,d.memo)(iq),iK={[u.Line]:"right",[u.Handle]:"bottom-right"};(0,d.memo)(function(e){let t,{nodeId:n,position:o,variant:r=u.Handle,className:i,style:l,children:a,color:s,minWidth:h=10,minHeight:p=10,maxWidth:g=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:v=!1,resizeDirection:y,autoScale:x=!0,shouldResize:w,onResizeStart:b,onResize:_,onResizeEnd:S}=e,E=rb(),M="string"==typeof n?n:E,C=oP(),k=(0,d.useRef)(null),N=r===u.Handle,P=oN((0,d.useCallback)((t=N&&x,e=>t?"".concat(Math.max(1/e.transform[2],1)):void 0),[N,x]),oE),A=(0,d.useRef)(null),j=null!=o?o:iK[r];(0,d.useEffect)(()=>{if(k.current&&M)return A.current||(A.current=function(e){let{domNode:t,nodeId:n,getStoreItems:o,onChange:r,onEnd:i}=e,l=er(t);return{update:function(e){let t,a,u,s,{controlPosition:c,boundaries:d,keepAspectRatio:f,resizeDirection:h,onResizeStart:p,onResize:g,onResizeEnd:m,shouldResize:v}=e,y={...op},x={...og},w=function(e){let t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:e.includes("left"),affectsY:e.includes("top")}}(c),b=null,_=[],S=!1,E=ey().on("start",e=>{var r,i,l,c,d,f,h;let{nodeLookup:g,transform:m,snapGrid:v,snapToGrid:w,nodeOrigin:S,paneDomNode:E}=o();if(!(t=g.get(n)))return;b=null!=(r=null==E?void 0:E.getBoundingClientRect())?r:null;let{xSnapped:M,ySnapped:C}=nA(e.sourceEvent,{transform:m,snapGrid:v,snapToGrid:w,containerBounds:b});for(let[e,o]of(x={...y={width:null!=(i=t.measured.width)?i:0,height:null!=(l=t.measured.height)?l:0,x:null!=(c=t.position.x)?c:0,y:null!=(d=t.position.y)?d:0},pointerX:M,pointerY:C,aspectRatio:y.width/y.height},a=void 0,t.parentId&&("parent"===t.extent||t.expandParent)&&(u=(a=g.get(t.parentId))&&"parent"===t.extent?[[0,0],[(h=a).measured.width,h.measured.height]]:void 0),_=[],s=void 0,g))if(o.parentId===n&&(_.push({id:e,position:{...o.position},extent:o.extent}),"parent"===o.extent||o.expandParent)){let e=function(e,t,n){var o,r;let i=t.position.x+e.position.x,l=t.position.y+e.position.y,a=null!=(o=e.measured.width)?o:0,u=null!=(r=e.measured.height)?r:0,s=n[0]*a,c=n[1]*u;return[[i-s,l-c],[i+a-s,l+u-c]]}(o,t,null!=(f=o.origin)?f:S);s=s?[[Math.min(e[0][0],s[0][0]),Math.min(e[0][1],s[0][1])],[Math.max(e[1][0],s[1][0]),Math.max(e[1][1],s[1][1])]]:e}null==p||p(e,{...y})}).on("drag",e=>{var n,i,l;let{transform:c,snapGrid:p,snapToGrid:m,nodeOrigin:E}=o(),M=nA(e.sourceEvent,{transform:c,snapGrid:p,snapToGrid:m,containerBounds:b}),C=[];if(!t)return;let{x:k,y:N,width:P,height:A}=y,j={},z=null!=(n=t.origin)?n:E,{width:O,height:I,x:R,y:D}=function(e,t,n,o,r,i,l,a){var u,s,c,d;let{affectsX:f,affectsY:h}=t,{isHorizontal:p,isVertical:g}=t,m=p&&g,{xSnapped:v,ySnapped:y}=n,{minWidth:x,maxWidth:w,minHeight:b,maxHeight:_}=o,{x:S,y:E,width:M,height:C,aspectRatio:k}=e,N=Math.floor(p?v-e.pointerX:0),P=Math.floor(g?y-e.pointerY:0),A=M+(f?-N:N),j=C+(h?-P:P),z=-i[0]*M,O=-i[1]*C,I=oh(A,x,w),R=oh(j,b,_);if(l){let e=0,t=0;f&&N<0?e=od(S+N+z,l[0][0]):!f&&N>0&&(e=of(S+A+z,l[1][0])),h&&P<0?t=od(E+P+O,l[0][1]):!h&&P>0&&(t=of(E+j+O,l[1][1])),I=Math.max(I,e),R=Math.max(R,t)}if(a){let e=0,t=0;f&&N>0?e=of(S+N,a[0][0]):!f&&N<0&&(e=od(S+A,a[1][0])),h&&P>0?t=of(E+P,a[0][1]):!h&&P<0&&(t=od(E+j,a[1][1])),I=Math.max(I,e),R=Math.max(R,t)}if(r){if(p){(I=Math.max(I,oh(A/k,b,_)*k),l)&&(I=Math.max(I,(f||h)&&(!f||h||!m)?od(E+O+(f?N:-N)/k,l[0][1])*k:of(E+O+A/k,l[1][1])*k));a&&(I=Math.max(I,(f||h)&&(!f||h||!m)?of(E+(f?N:-N)/k,a[0][1])*k:od(E+A/k,a[1][1])*k))}if(g){(R=Math.max(R,oh(j*k,x,w)/k),l)&&(R=Math.max(R,(f||h)&&(!h||f||!m)?od(S+(h?P:-P)*k+z,l[0][0])/k:of(S+j*k+z,l[1][0])/k));a&&(R=Math.max(R,(f||h)&&(!h||f||!m)?of(S+(h?P:-P)*k,a[0][0])/k:od(S+j*k,a[1][0])/k))}}P+=P<0?R:-R,N+=N<0?I:-I,r&&(m?A>j*k?P=((u=f,s=h,u?!s:s)?-N:N)/k:N=((c=f,d=h,c?!d:d)?-P:P)*k:p?(P=N/k,h=f):(N=P*k,f=h));let D=f?S+N:S,L=h?E+P:E;return{width:M+(f?-N:N),height:C+(h?-P:P),x:i[0]*N*(f?-1:1)+D,y:i[1]*P*(h?-1:1)+L}}(x,w,M,d,f,z,u,s),L=O!==P,B=I!==A,T=R!==k&&L,H=D!==N&&B;if(!T&&!H&&!L&&!B)return;if((T||H||1===z[0]||1===z[1])&&(j.x=T?R:y.x,j.y=H?D:y.y,y.x=j.x,y.y=j.y,_.length>0)){let e=R-k,t=D-N;for(let n of _)n.position={x:n.position.x-e+z[0]*(O-P),y:n.position.y-t+z[1]*(I-A)},C.push(n)}if((L||B)&&(j.width=L&&(!h||"horizontal"===h)?O:y.width,j.height=B&&(!h||"vertical"===h)?I:y.height,y.width=j.width,y.height=j.height),a&&t.expandParent){let e=z[0]*(null!=(i=j.width)?i:0);j.x&&j.x<e&&(y.x=e,x.x=x.x-(j.x-e));let t=z[1]*(null!=(l=j.height)?l:0);j.y&&j.y<t&&(y.y=t,x.y=x.y-(j.y-t))}let V=function(e){let{width:t,prevWidth:n,height:o,prevHeight:r,affectsX:i,affectsY:l}=e,a=t-n,u=o-r,s=[a>0?1:a<0?-1:0,u>0?1:u<0?-1:0];return a&&i&&(s[0]=-1*s[0]),u&&l&&(s[1]=-1*s[1]),s}({width:y.width,prevWidth:P,height:y.height,prevHeight:A,affectsX:w.affectsX,affectsY:w.affectsY}),F={...y,direction:V};!1!==(null==v?void 0:v(e,F))&&(S=!0,null==g||g(e,F),r(j,C))}).on("end",e=>{S&&(null==m||m(e,{...y}),null==i||i({...y}),S=!1)});l.call(E)},destroy:function(){l.on(".drag",null)}}}({domNode:k.current,nodeId:M,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:i}=C.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:i}=C.getState(),l=[],a={x:e.x,y:e.y},u=o.get(M);if(u&&u.expandParent&&u.parentId){var s,c,d,f,h,p,g;let t=null!=(s=u.origin)?s:i,n=null!=(d=null!=(c=e.width)?c:u.measured.width)?d:0,m=null!=(h=null!=(f=e.height)?f:u.measured.height)?h:0,v=n5([{id:u.id,parentId:u.parentId,rect:{width:n,height:m,...nN({x:null!=(p=e.x)?p:u.position.x,y:null!=(g=e.y)?g:u.position.y},{width:n,height:m},u.parentId,o,t)}}],o,r,i);l.push(...v),a.x=e.x?Math.max(t[0]*n,e.x):void 0,a.y=e.y?Math.max(t[1]*m,e.y):void 0}if(void 0!==a.x&&void 0!==a.y){let e={id:M,type:"position",position:{...a}};l.push(e)}if(void 0!==e.width&&void 0!==e.height){let t={id:M,type:"dimensions",resizing:!0,setAttributes:!y||("horizontal"===y?"width":"height"),dimensions:{width:e.width,height:e.height}};l.push(t)}for(let e of t){let t={...e,type:"position"};l.push(t)}n(l)},onEnd:e=>{let{width:t,height:n}=e;C.getState().triggerNodeChanges([{id:M,type:"dimensions",resizing:!1,dimensions:{width:t,height:n}}])}})),A.current.update({controlPosition:j,boundaries:{minWidth:h,minHeight:p,maxWidth:g,maxHeight:m},keepAspectRatio:v,resizeDirection:y,onResizeStart:b,onResize:_,onResizeEnd:S,shouldResize:w}),()=>{var e;null==(e=A.current)||e.destroy()}},[j,h,p,g,m,v,b,_,S,w]);let z=j.split("-");return(0,c.jsx)("div",{className:f(["react-flow__resize-control","nodrag",...z,r,i]),ref:k,style:{...l,scale:P,...s&&{[N?"backgroundColor":"borderColor"]:s}},children:a})});let iU=[{id:"1",position:{x:0,y:0},data:{label:"Data Pipeline"}},{id:"2",position:{x:0,y:100},data:{label:"Data Source"}},{id:"3",position:{x:250,y:100},data:{label:"Transformation"}},{id:"4",position:{x:250,y:200},data:{label:"Data Warehouse"}}],iG=[{id:"e2-3",source:"2",target:"3"},{id:"e3-4",source:"3",target:"4"}];function iQ(){return(0,c.jsx)("div",{style:{width:"100%",height:"400px"},className:"rounded-lg border border-secondary/30",children:(0,c.jsxs)(iS,{nodes:iU,edges:iG,children:[(0,c.jsx)(iB,{}),(0,c.jsx)(iW,{}),(0,c.jsx)(iP,{gap:12,size:1})]})})}}]);